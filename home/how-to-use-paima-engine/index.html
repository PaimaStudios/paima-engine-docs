<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-home/how-to-use-paima-engine">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">How To Use Paima Engine | Paima Engine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.paimastudios.com/home/how-to-use-paima-engine"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How To Use Paima Engine | Paima Engine"><meta data-rh="true" name="description" content="Paima Engine is as an all-in-one batteries-included executable which provides you with everything you need to get started writing your own trustless Web3 game."><meta data-rh="true" property="og:description" content="Paima Engine is as an all-in-one batteries-included executable which provides you with everything you need to get started writing your own trustless Web3 game."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.paimastudios.com/home/how-to-use-paima-engine"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/home/how-to-use-paima-engine" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/ja/home/how-to-use-paima-engine" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/home/how-to-use-paima-engine" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.c472958a.css">
<link rel="preload" href="/assets/js/runtime~main.a746c8b5.js" as="script">
<link rel="preload" href="/assets/js/main.c47d89cb.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="Paima logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/favicon.ico" alt="Paima logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Paima</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/home/how-to-use-paima-engine" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/home/how-to-use-paima-engine" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">Japanese</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">What is Paima Engine?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/home/how-to-use-paima-engine">How To Use Paima Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/deploying-l2-smart-contract">Deploying The Paima L2 Smart Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/posting-test-game-inputs">Posting Test Game Inputs To L2 Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/deploying-your-stateful-nft">Deploying Your Own Stateful NFT Contract</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/chain-data-extensions">Chain Data Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/environment-config-values">Environment Configuration Variables</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/home/paima-bacher">Paima Batcher</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/PaimaStudios/paima-game-templates" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Paima Game Templates<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://paimastudios.com" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Paima Studios Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>How To Use Paima Engine</h1><p>Paima Engine is as an all-in-one batteries-included executable which provides you with everything you need to get started writing your own trustless Web3 game.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessing-documentation">Accessing Documentation<a href="#accessing-documentation" class="hash-link" aria-label="Direct link to Accessing Documentation" title="Direct link to Accessing Documentation">​</a></h2><p>Paima Engine docs are available from two sources:</p><ol><li>Embedded inside Paima Engine itself (<code>./paima-engine docs</code>)</li><li>Hosted on <a href="https://docs.paimastudios.com" target="_blank" rel="noopener noreferrer">docs.paimastudios.com</a></li></ol><h1>Accessing Paima Engine</h1><p>Paima Engine is under developer preview at the moment. Notably, anybody can access it by <a href="https://paimastudios.com/contact/" target="_blank" rel="noopener noreferrer">contacting us</a>.</p><p>If you do not have Paima Engine yet, but want to follow along, you can find public templates using Paima <a href="https://github.com/PaimaStudios/paima-game-templates" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-your-project">Initializing Your Project<a href="#initializing-your-project" class="hash-link" aria-label="Direct link to Initializing Your Project" title="Direct link to Initializing Your Project">​</a></h2><p>When starting a new project with Paima Engine, the developer can choose to either go completely barebones (by only initializing <code>paima-sdk</code>) or use an included template to bootstrap with all of the essentials. Initializing the SDK by itself may also be useful in cases where the developer is upgrading their project to use a new version of Paima Engine which has introduced new incompatibilities in the SDK.</p><p>You can see the available options by using:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./paima-engine init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To initialize a game using a basic game template use the following command and select the <code>generic</code> template:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./paima-engine init template</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once the command has finished, you will notice two new folders have been created, <code>paima-sdk</code> and <code>generic-game-template</code> (name varies based on template selected). The SDK is directly used by the game template, and so all code you write will be in the <code>generic-game-template</code> folder.</p><p>Lastly to finish the initialization process off, simply go into the <code>generic-game-template</code> folder and run <code>npm run initialize</code>. This will install all of the packages and set the project up to be ready for you to start coding.</p><p>Of note, feel free to rename the <code>generic-game-template</code> folder to the name of your game (or whatever you prefer), but make sure to not change the folder name of <code>paima-sdk</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="packing-your-game-code">Packing Your Game Code<a href="#packing-your-game-code" class="hash-link" aria-label="Direct link to Packing Your Game Code" title="Direct link to Packing Your Game Code">​</a></h2><p>The specifics of writing your game code is outside of the scope of this current getting started guide, thus we will move on to packing your game code to be run with Paima Engine.</p><p>As the <code>generic-game-template</code> folder has already been initialized in the previous section, we can move forward with packing the game code (you can pack the generic game template without writing any new code initially to test). Simply use the following command in the folder:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">npm run pack</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will generate two files (<code>gameCode.cjs</code> and <code>endpoints.cjs</code>) which will be placed in a <code>packaged</code> folder (located next to the executable). The former file holds the vast majority of the &quot;game&quot; (all of your code related to your game logic and state transitions) and the latter holds code related to setting up the webserver endpoints of your game node.</p><p>Both of these files need to remain in the <code>packaged</code> folder (which is required to be in the same root folder as the Paima Engine executable itself).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-game-node-db">Setting Up Your Game Node DB<a href="#setting-up-your-game-node-db" class="hash-link" aria-label="Direct link to Setting Up Your Game Node DB" title="Direct link to Setting Up Your Game Node DB">​</a></h2><p>Paima Engine requires you to deploy a Postgres database which will be used to store all state of your game node.</p><p>For those already experienced with setting up a Postgres DB, feel free to skip over the majority of this section. One important note however is that each game template also includes a <code>init.sql</code> file in the <code>/db/migrations/init</code> folder which you should use to initialize the database.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-docker-to-setup-a-postgres-db">Using Docker To Setup A Postgres DB<a href="#using-docker-to-setup-a-postgres-db" class="hash-link" aria-label="Direct link to Using Docker To Setup A Postgres DB" title="Direct link to Using Docker To Setup A Postgres DB">​</a></h3><p>For those who prefer an automated solution, simply proceed with the following steps to have a local Postgres database ready-to-use with your game node:</p><ol><li>Install docker/docker compose on your computer (<a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/</a>)</li><li>Go into the root folder of your game code (ie. <code>generic-game-template</code>) in your terminal.</li><li>Run <code>npm run database:up</code></li><li>Docker compose will automatically download and setup Postgres for you, while also using the <code>init.sql</code> from your game code to initialize the DB.</li><li>Your DB will be up and running, and can be closed via <code>Ctrl + c</code> like any CLI application.</li><li>Any time you want to bring the DB back online, simply re-run <code>npm run database:up</code>.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updating-your-initsql">Updating Your init.sql<a href="#updating-your-initsql" class="hash-link" aria-label="Direct link to Updating Your init.sql" title="Direct link to Updating Your init.sql">​</a></h3><p>One side note, as you begin writing your game logic (or when building a template) you likely will end up changing the DB schema from the base template you started off with. When you do this, make sure to update the <code>init.sql</code> file to properly initialize your DB schema so that future game nodes either you or others deploy for your game will be able to properly work with your game logic.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-your-games-l2-smart-contract">Deploying Your Game&#x27;s L2 Smart Contract<a href="#deploying-your-games-l2-smart-contract" class="hash-link" aria-label="Direct link to Deploying Your Game&#x27;s L2 Smart Contract" title="Direct link to Deploying Your Game&#x27;s L2 Smart Contract">​</a></h2><p>Each game built with Paima Engine is its very own Layer 2. This means that you will need to deploy the Paima L2 Smart Contract for your game, to whichever chain you wish to launch on.</p><p>Reference the <a href="/home/deploying-l2-smart-contract">Deploying L2 Smart Contract</a> documentation to easily deploy the contract.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-game-node-config">Setting Up Your Game Node Config<a href="#setting-up-your-game-node-config" class="hash-link" aria-label="Direct link to Setting Up Your Game Node Config" title="Direct link to Setting Up Your Game Node Config">​</a></h2><p>You may have noticed that during the initialization process a <code>.env.development</code> file was created in the root folder. The Paima Engine executable will read this file (or specifically <code>.env.${process.env.NODE_ENV || development})</code> when attempting to start running your game node.</p><p>Thus you must fill out this env file with all of the pre-requisites to proceed forward.</p><p>Specifically with the included barebones config, you must specify:</p><ul><li><code>CHAIN_URI</code> (A URL to the RPC of an EVM chain node of the network you are targeting)</li><li><code>CONTRACT_ADDRESS</code> (The contract address of your deployed Paima L2 Smart Contract for your game)</li><li><code>START_BLOCKHEIGHT</code> (The block height that your smart contact was deployed on, so Paima Engine knows from what block height to start syncing)</li><li>Postgres DB Credentials</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-your-game-node">Running Your Game Node<a href="#running-your-game-node" class="hash-link" aria-label="Direct link to Running Your Game Node" title="Direct link to Running Your Game Node">​</a></h2><p>Now that your game code is packed, contract and DB deployed, and your config is ready, we can now start your game node via the Paima Engine executable.</p><p>Simply go into the root folder and run the following command:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">./paima-engine run</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you forgot to pack your code, your config is not properly setup, or anything else as such, you will get an error.</p><p>Otherwise if everything was setup correctly then you will have officially started your game node for the very first time! You will see some initial boot logs, and after a few seconds see the progress of your game node syncing from the blockchain as such:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">q125-q225</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">q225-q325</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">q325-q425</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These logs denote the block height numbers that the game node is syncing from the deployed L2 smart contract on the blockchain. Other logs will also pop up, such as when game inputs are read from the contract. Of note, logs are also saved in the <code>logs.log</code> file for easy access.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing-out-your-game-node">Testing Out Your Game Node<a href="#testing-out-your-game-node" class="hash-link" aria-label="Direct link to Testing Out Your Game Node" title="Direct link to Testing Out Your Game Node">​</a></h2><p>Now that your game node is syncing, we recommend testing to ensure that both the contract you deployed and the node itself are all in working order/configured properly.</p><p>Simply follow the <a href="/home/posting-test-game-inputs">posting test game inputs to L2 contract tutorial</a> and within a couple minutes you&#x27;ll have experienced the end-to-end loop of using Paima Engine!</p><p>Of note, the above tutorial teaches you an easy way to manually submit custom-crafted game inputs, which is also useful when implementing new features as you develop your games/apps.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-your-game-node">Deploying Your Game Node<a href="#deploying-your-game-node" class="hash-link" aria-label="Direct link to Deploying Your Game Node" title="Direct link to Deploying Your Game Node">​</a></h2><p>If you wish to deploy your game on a server/move into a production environment, the following files are all that is needed for Paima Engine to run your game node:</p><ul><li><code>packaged/gameCode.cjs</code> (packed game code)</li><li><code>packaged/endpoints.cjs</code> (packed webserver code)</li><li><code>.env.*</code> (Your game node config)</li><li><code>paima-engine</code> (The Paima Engine executable)</li></ul><p>In other words, you do not require your unpacked game code or <code>paima-sdk</code>, allowing you to easily run your game node wherever you deem best (without even needing node installed or any external dependencies).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="snapshots">Snapshots<a href="#snapshots" class="hash-link" aria-label="Direct link to Snapshots" title="Direct link to Snapshots">​</a></h2><p>If you have <code>pg_dump</code> installed on the machine running your game node (typically included in the postgres package of your OS), then Paima Engine will automatically take snapshots every day of your game node DB and store them in a <code>snapshots</code> folder. The last 3 days of snapshots are maintained, and everything older is automatically deleted.</p><p>If <code>pg_dump</code> is not available, then when you start your game node an error will be printed in the terminal denoting of such, however the game node will still function perfectly fine nonetheless (and will simply skip taking snapshots).</p><p>Of note, unlike in the Web2/2.5 world, these snapshots are <em>not vital</em>. You are building a trustless Web3 game using Paima Engine, which means that even if your entire DB gets corrupted or deleted, a brand new game node can be synced from scratch by just reading from the blockchain. These snapshots are simply a quality-of-life enhancement, as they allow you to deploy new game nodes much faster without having to resync from scratch.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging">​</a></h2><p>Paima-Engine includes 4 binaries:</p><ul><li>Linux production <code>paima-engine-linux</code></li><li>Linux development <code>dev-paima-engine-linux</code></li><li>Macos x64 production <code>paima-engine-macos</code></li><li>Macos x64 development <code>dev-paima-engine-macos</code></li></ul><p>The binaries named <code>dev-*</code> run a node.js inspector and should only be used for development and not for production environments.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-debug">How to debug<a href="#how-to-debug" class="hash-link" aria-label="Direct link to How to debug" title="Direct link to How to debug">​</a></h3><ol><li>Launching your game with the <code>./dev-paima-engine-linux run</code> or <code>./dev-paima-engine-macos run</code> you will see a message similar to:  </li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Debugger listening on ws://127.0.0.1:9229/e6e784f8-bcd8-4ace-8b17-9b515ae45f7d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">For help, see: https://nodejs.org/en/docs/inspector</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><p>Open in a Google Chrome browser: <code>chrome://inspect</code><br>
<!-- -->You should see a <code>Remote Target</code> entry with the name <code>PKG_DUMMY_ENTRYPOINT file:///</code> click on <code>inspect</code>.<br>
<!-- -->NOTE: If you do not see the entry: in <code>Configure...</code> add <code>localhost:9229</code> where the actual port is the one informed in the message in step 1.<br>
<!-- -->A new debug &quot;DevTools&quot; window will pop up. </p></li><li><p>In the new DevTools, go to the <code>Sources</code> tab and click on <code>+ Add folder to workspace</code> select the folder <code>packaged</code> where your compiled game is located you should see <code>endpoints.cjs</code> and <code>gameCode.cjs</code> select this folder.<br>
<!-- -->The first time DevTools might request permission to access your hard drive: allow access.</p></li><li><p>Now you are ready to DEBUG.
In the <code>sources</code> tab you can place breakpoints in endpoint.cjs and gameCode.cjs by clicking on line-number on the left side of the line. </p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-migrations">Data Migrations<a href="#data-migrations" class="hash-link" aria-label="Direct link to Data Migrations" title="Direct link to Data Migrations">​</a></h2><p>Data Migrations allow game developers to add data to the database e.g., World Setup, NPC, Items, and other system tables.  </p><p>IMPORTANT: You should never add data to the database manually. It should be done only through state-transitions and data migrations.</p><p>Data Migrations are applied at a specific block-height. The file name indicates the OFFSET from the START_BLOCKHEIGHT (defined in the .env file).</p><p>File structure:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">root_folder</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   | --- paima-sdk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   | --- paima-engine-{linux|macos}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   | --- packaged</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             | --- endpoints.cjs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             | --- gameCode.cjs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             | --- migrations</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          | --- 1000.sql</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          | --- 5500.sql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>1000.sql will be applied at block-height START_BLOCKHEIGHT + 1000.<br>
<!-- -->5500.sql will be applied at block-height START_BLOCKHEIGHT + 5500.<br>
<!-- -->Both will be applied before any other inputs are processed for that block-height.</p><p>The *.sql files are PGSQL scripts. We ABSOLUTELY recommend writing your SQL script as a transaction, so if it fails the block-process-loop will stop and the script can be fixed and reapplied.</p><p>1000.sql example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">BEGIN; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- INSERT... ; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-- UPDATE ...; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COMMIT;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="paima-engine-dry-running">Paima Engine Dry Running<a href="#paima-engine-dry-running" class="hash-link" aria-label="Direct link to Paima Engine Dry Running" title="Direct link to Paima Engine Dry Running">​</a></h2><p>For context, Paima Batcher allows end users to sign game inputs without manually posting transactions themselves. It enables the cross-chain Paima Whirlpool functionality to be possible in Paima Engine.</p><p>For Paima Batcher to work well in production, game inputs can be validated before posting on-chain to save on transaction fees &amp; increase throughput. To support this validation Paima Engine ships with a &quot;dry run&quot; endpoint which allows directly submitting a game input via HTTP, and having it processed by the STF (returning success or fail) without saving any of the resulting SQL queries. As such this allows the batcher (or any external tooling) to check that a game input validates before posting it on-chain.</p><p>This functionality is disabled by default to ensure that in production any game nodes which are user-facing have dry running disabled (as this is a DoS vector). </p><ul><li>You can enable dry running by setting the environment variable in your .env file: <code>ENABLE_DRY_RUN=true</code>.</li><li>Once enabled, your game node will now have a <code>/dry_run</code> endpoint which takes params of: <code>{gameInput: string, userAddress: string}</code>.</li><li>It is possible to detect dry run game inputs in your game logic (if you want to do advanced testing using dry running) by reading the <code>dry_run</code> field in the game input you receive in your STF</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/PaimaStudios/paima-engine-docs/docs/home/1 - how-to-use-paima-engine.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">What is Paima Engine?</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/home/deploying-l2-smart-contract"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Deploying The Paima L2 Smart Contract</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#accessing-documentation" class="table-of-contents__link toc-highlight">Accessing Documentation</a></li><li><a href="#initializing-your-project" class="table-of-contents__link toc-highlight">Initializing Your Project</a></li><li><a href="#packing-your-game-code" class="table-of-contents__link toc-highlight">Packing Your Game Code</a></li><li><a href="#setting-up-your-game-node-db" class="table-of-contents__link toc-highlight">Setting Up Your Game Node DB</a><ul><li><a href="#using-docker-to-setup-a-postgres-db" class="table-of-contents__link toc-highlight">Using Docker To Setup A Postgres DB</a></li><li><a href="#updating-your-initsql" class="table-of-contents__link toc-highlight">Updating Your init.sql</a></li></ul></li><li><a href="#deploying-your-games-l2-smart-contract" class="table-of-contents__link toc-highlight">Deploying Your Game&#39;s L2 Smart Contract</a></li><li><a href="#setting-up-your-game-node-config" class="table-of-contents__link toc-highlight">Setting Up Your Game Node Config</a></li><li><a href="#running-your-game-node" class="table-of-contents__link toc-highlight">Running Your Game Node</a></li><li><a href="#testing-out-your-game-node" class="table-of-contents__link toc-highlight">Testing Out Your Game Node</a></li><li><a href="#deploying-your-game-node" class="table-of-contents__link toc-highlight">Deploying Your Game Node</a></li><li><a href="#snapshots" class="table-of-contents__link toc-highlight">Snapshots</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a><ul><li><a href="#how-to-debug" class="table-of-contents__link toc-highlight">How to debug</a></li></ul></li><li><a href="#data-migrations" class="table-of-contents__link toc-highlight">Data Migrations</a></li><li><a href="#paima-engine-dry-running" class="table-of-contents__link toc-highlight">Paima Engine Dry Running</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Paima Studios. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a746c8b5.js"></script>
<script src="/assets/js/main.c47d89cb.js"></script>
</body>
</html>