<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-home/react-to-events/funnel-types/stable-tick-rate-funnel">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Stable Tick Rate | Paima Engine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.paimastudios.com/ja/img/paima-banner.png"><meta data-rh="true" name="twitter:image" content="https://docs.paimastudios.com/ja/img/paima-banner.png"><meta data-rh="true" property="og:url" content="https://docs.paimastudios.com/ja/home/react-to-events/funnel-types/stable-tick-rate-funnel"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Stable Tick Rate | Paima Engine"><meta data-rh="true" name="description" content="Not every blockchain has a predictable block time. This is especially true of L2s like Arbitrum that only create batches when there is at least 1 transaction to post to the L1"><meta data-rh="true" property="og:description" content="Not every blockchain has a predictable block time. This is especially true of L2s like Arbitrum that only create batches when there is at least 1 transaction to post to the L1"><link data-rh="true" rel="icon" href="/ja/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.paimastudios.com/ja/home/react-to-events/funnel-types/stable-tick-rate-funnel"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/home/react-to-events/funnel-types/stable-tick-rate-funnel" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/ja/home/react-to-events/funnel-types/stable-tick-rate-funnel" hreflang="ja"><link data-rh="true" rel="alternate" href="https://docs.paimastudios.com/home/react-to-events/funnel-types/stable-tick-rate-funnel" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><link rel="stylesheet" href="/ja/assets/css/styles.91abc5e4.css">
<link rel="preload" href="/ja/assets/js/runtime~main.a62ea7e9.js" as="script">
<link rel="preload" href="/ja/assets/js/main.be4ddcc3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/ja/"><div class="navbar__logo"><img src="/ja/img/favicon.ico" alt="Paima logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ja/img/favicon.ico" alt="Paima logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Paima</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Japanese</a><ul class="dropdown__menu"><li><a href="/home/react-to-events/funnel-types/stable-tick-rate-funnel" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/ja/home/react-to-events/funnel-types/stable-tick-rate-funnel" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">Japanese</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ja/">What is Paima Engine?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ja/home/setup/how-to-use-paima-engine">Setting-up Your Environment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ja/home/read-write-L2-state/base-format">Read &amp; Write L2 State</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/ja/home/react-to-events/scheduled-events">Reacting To Events</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/home/react-to-events/scheduled-events">Scheduling Events and Timers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ja/home/react-to-events/chain-data-extensions/introduction">Chain Data Extensions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/home/react-to-events/L2-quirks">L2 Quirks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/ja/home/react-to-events/funnel-types/intro">Funnel Types</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/home/react-to-events/funnel-types/intro">Paima Funnel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/home/react-to-events/funnel-types/block-funnel">Block Funnel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ja/home/react-to-events/funnel-types/stable-tick-rate-funnel">Stable Tick Rate</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ja/home/randomness/">Randomness</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ja/home/database-management/snapshotting">Database Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ja/home/releasing-a-game/versioning">Releasing a Game</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/PaimaStudios/paima-game-templates" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Paima Game Templates<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://paimastudios.com" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Paima Studios Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><h1>Stable Tick Rate</h1><p>Not every blockchain has a predictable block time. This is especially true of L2s like Arbitrum that only create batches when there is at least 1 transaction to post to the L1</p><img loading="lazy" src="/ja/assets/images/paima-layers-e08efca213a9938891c684df12bb593e.png" class="img-full img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="problems">Problems<a href="#problems" class="hash-link" aria-label="Problems への直接リンク" title="Problems への直接リンク">​</a></h2><p>Deploying Paima to a chain with a chain without a predictable block time leads to some additional complications:</p><ol><li><strong>Correlating block numbers to time</strong>: Calculations that correlate block number (block height) and time will not work, and so developers cannot make estimations by using the block number and <code>ENV.BLOCK_TIME</code>.</li><li><strong>Scheduling inputs</strong>: Scheduled inputs may not work as expected, as the target block number does not represent a specific time.</li><li><strong>Reacting timely</strong>: Reacting to events in a timely manner is difficult if L2 batches are in-frequent (remember, most L2s only post batches if there is at least 1 tx to post on the L1). However, you may want your game on a L2 to react quickly to <a href="/ja/home/react-to-events/chain-data-extensions/introduction">CDEs</a> coming from the L1.</li></ol><p>For example, if you are trying to build onchain chess where users have a limited amount of time to make a move, it would be good to show them in the UI if they ran out of time right away instead of having to wait for the next L2 block for your game&#x27;s state machine to update.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="emulated-blocks-ebs">Emulated blocks (EBs)<a href="#emulated-blocks-ebs" class="hash-link" aria-label="Emulated blocks (EBs) への直接リンク" title="Emulated blocks (EBs) への直接リンク">​</a></h2><p>In order to give a predictable tick rate for games to update, Paima allows you to enable emulated block mode which pretends a block is made every N seconds (i.e. split time in to slots of length N seconds)</p><p>Essentially, you are switching the underlying unit of time for your application:</p><ul><li><em>Without emulated blocks</em>: underlying chain block time</li><li><em>With emulated blocks</em>: fixed time interval</li></ul><svg xmlns="http://www.w3.org/2000/svg" width="653" height="220" viewBox="-0.5 -0.5 653 220" class="img-full" style="height:auto;margin-bottom:48px"><rect x="496" y="16" width="156" height="63" rx="9.45" ry="9.45" fill="#FFF" stroke="#000"></rect><path fill="none" d="M513.1 31h118v30h-118z"></path><switch transform="translate(-.5 -.5)"><text x="572" y="50" font-family="Helvetica" font-size="12" text-anchor="middle">Game state machine</text></switch><rect x="294.74" y="17" width="156" height="62" rx="9.3" ry="9.3" fill="#FFF" stroke="#000"></rect><path fill="none" d="M311.84 32h118v30h-118z"></path><switch transform="translate(-.5 -.5)"><text x="371" y="51" font-family="Helvetica" font-size="12" text-anchor="middle">Paima Funnel</text></switch><path fill="none" d="M65 0h118v30H65z"></path><switch transform="translate(-.5 -.5)"><text x="124" y="19" fill="#FFF" font-family="Helvetica" font-size="12" text-anchor="middle">Blocks</text></switch><path d="m450.74 48 38.89-.43" fill="none" stroke="#FFF" stroke-miterlimit="10"></path><path d="m494.88 47.51-6.96 3.58 1.71-3.52-1.79-3.48Z" fill="#FFF" stroke="#FFF" stroke-miterlimit="10"></path><path d="M132 28h30l8 8v26h-30l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M132 28h30l8 8h-30Z" fill-opacity="0.05"></path><path d="m132 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M140 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M173 28h30l8 8v26h-30l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M173 28h30l8 8h-30Z" fill-opacity="0.05"></path><path d="m173 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M181 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M215 28h30l8 8v26h-30l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M215 28h30l8 8h-30Z" fill-opacity="0.05"></path><path d="m215 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M223 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M260 48h28.37" fill="none" stroke="#FFF" stroke-miterlimit="10"></path><path d="m293.62 48-7 3.5 1.75-3.5-1.75-3.5Z" fill="#FFF" stroke="#FFF" stroke-miterlimit="10"></path><rect x="496" y="146.5" width="156" height="63" rx="9.45" ry="9.45" fill="#FFF" stroke="#000"></rect><path fill="none" d="M513.1 161.5h118v30h-118z"></path><switch transform="translate(-.5 -.5)"><text x="572" y="180" font-family="Helvetica" font-size="12" text-anchor="middle">Game state machine</text></switch><rect x="294.74" y="147.5" width="156" height="62" rx="9.3" ry="9.3" fill="#FFF" stroke="#000"></rect><path fill="none" d="M311.84 162.5h118v30h-118z"></path><switch transform="translate(-.5 -.5)"><text x="371" y="181" font-family="Helvetica" font-size="12" text-anchor="middle">Paima Funnel</text></switch><path fill="none" d="M62 111h118v30H62z"></path><switch transform="translate(-.5 -.5)"><text x="121" y="130" fill="#FFF" font-family="Helvetica" font-size="12" text-anchor="middle">Slices of time</text></switch><path d="m450.74 178.5 38.89-.43" fill="none" stroke="#FFF" stroke-miterlimit="10"></path><path d="m494.88 178.01-6.96 3.58 1.71-3.52-1.79-3.48Z" stroke="#FFF" stroke-miterlimit="10"></path><path d="m257 179 31.37-.42" fill="none" stroke="#FFF" stroke-miterlimit="10"></path><path d="m293.62 178.51-6.95 3.6 1.7-3.53-1.79-3.47Z" fill="#FFF" stroke="#FFF" stroke-miterlimit="10"></path><path fill="#FFF" stroke="#000" d="M0 139h80v80H0z"></path><path fill="none" d="M0 138h80v19H0z"></path><switch transform="translate(-.5 -.5)"><text x="40" y="151" font-family="Helvetica" font-size="12" text-anchor="middle">15 seconds</text></switch><path d="M21 165h30l8 8v26H29l-8-8v-26Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M21 165h30l8 8H29Z" fill-opacity="0.05"></path><path d="m21 165 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M29 199v-26l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path fill="#FFF" stroke="#000" d="M85 139h80v80H85z"></path><path fill="none" d="M85 138h80v19H85z"></path><switch transform="translate(-.5 -.5)"><text x="125" y="151" font-family="Helvetica" font-size="12" text-anchor="middle">15 seconds</text></switch><path fill="#FFF" stroke="#000" d="M170 139h80v80h-80z"></path><path fill="none" d="M170 138h80v19h-80z"></path><switch transform="translate(-.5 -.5)"><text x="210" y="151" font-family="Helvetica" font-size="12" text-anchor="middle">15 seconds</text></switch><path d="M209 170h26.65l8 8v23H217l-8-8v-23Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M209 170h26.65l8 8H217Z" fill-opacity="0.05"></path><path d="m209 170 8 8v23l-8-8Z" fill-opacity="0.1"></path><path d="M217 201v-23l-8-8m8 8h26.65" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M176 170h26.65l8 8v23H184l-8-8v-23Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M176 170h26.65l8 8H184Z" fill-opacity="0.05"></path><path d="m176 170 8 8v23l-8-8Z" fill-opacity="0.1"></path><path d="M184 201v-23l-8-8m8 8h26.65" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M8 28h30l8 8v26H16l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M8 28h30l8 8H16Z" fill-opacity="0.05"></path><path d="m8 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M16 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M49 28h30l8 8v26H57l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M49 28h30l8 8H57Z" fill-opacity="0.05"></path><path d="m49 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M57 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path><path d="M91 28h30l8 8v26H99l-8-8V28Z" fill="#FFF" stroke="#000" stroke-miterlimit="10"></path><path d="M91 28h30l8 8H99Z" fill-opacity="0.05"></path><path d="m91 28 8 8v26l-8-8Z" fill-opacity="0.1"></path><path d="M99 62V36l-8-8m8 8h30" fill="none" stroke="#000" stroke-miterlimit="10"></path></svg><p><strong>Note</strong>: this is NOT create a new L2 that has a stable block time, as that would hurt composability. This is just emulating faster time by aggregating blocks based on specific time intervals. That means that emulated blocks can help your game react faster, but it will not be able to send transactions faster (as txs still need to be included in a block in the underlying chain for Paima to see them).
You can combine this with different optimistic update functionality if you always want to emulate faster transaction sending.</p><p>Note that emulated blocks have a <a href="https://en.wikipedia.org/wiki/One-to-many_(data_model)" target="_blank" rel="noopener noreferrer">one-to-many relationship</a> with the underlying chain:</p><ol><li>There might be some emulated blocks that contain zero real blocks (ex: emulated block every 5 seconds for an underlying chain with a block approximtely every 20 seconds)</li><li>There might be some emulated blocks that contain multiple real blocks (ex: emulated block every 20 seconds for an underlying chain with a block approximate every 5 seconds)</li></ol><svg viewBox="0 0 624 243" fill="none" stroke-linecap="square" stroke-miterlimit="10" preserveAspectRatio="none" width="624" height="243" xmlns="http://www.w3.org/2000/svg" class="img-full" style="height:auto"><clipPath id="a"><path d="M0 0h624v243H0V0Z"></path></clipPath><path fill="none" clip-path="url(#a)" d="M-50.405-71.31h768.577v578.477H-50.405ZM0 82.576h436.338"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M0 82.576h434.052"></path><path fill="#FFF" stroke="#FFF" stroke-width="0.668" stroke-linecap="butt" clip-path="url(#a)" d="m434.052 82.576-.75.753 2.061-.753-2.061-.753Z" fill-rule="evenodd"></path><path fill="none" clip-path="url(#a)" d="M376.087 24.52H612.38v25.959H376.087Z"></path><path fill="#FFF" clip-path="url(#a)" d="M382.873 40.83V33.16h2.47q1.408 0 1.835.115.657.168 1.095.754.448.575.448 1.485 0 .711-.26 1.193-.25.48-.647.753-.385.272-.792.366-.553.105-1.605.105h-1.001v2.897h-1.543Zm1.543-6.372v2.176h.844q.907 0 1.21-.115.312-.125.49-.376.177-.262.177-.607 0-.418-.25-.69-.24-.272-.616-.335-.281-.053-1.115-.053h-.74Zm6.661 2.511-1.334-.24q.23-.806.771-1.193.553-.387 1.626-.387.98 0 1.46.23t.677.596q.198.356.198 1.308l-.02 1.716q0 .732.073 1.088.073.345.26.742h-1.449q-.052-.146-.135-.439-.042-.125-.052-.167-.376.366-.803.554-.428.178-.917.178-.855 0-1.345-.46-.49-.471-.49-1.182 0-.471.219-.837.23-.377.625-.565.407-.199 1.168-.345 1.032-.2 1.428-.367v-.146q0-.419-.209-.596-.208-.189-.792-.189-.386 0-.604.157-.22.157-.355.544Zm1.96 1.193q-.282.094-.897.23-.604.125-.792.251-.292.199-.292.513 0 .313.23.544.229.22.583.22.396 0 .761-.262.261-.199.344-.492.063-.188.063-.711v-.293Zm2.882-3.64v-1.36h1.46v1.36h-1.46Zm0 6.307v-5.555h1.46v5.555h-1.46Zm2.851-5.555h1.356v.754q.719-.88 1.72-.88.531 0 .917.22.396.22.646.66.365-.44.782-.66.428-.22.907-.22.615 0 1.032.252.427.24.636.722.146.356.146 1.15v3.557h-1.46v-3.18q0-.826-.156-1.067-.198-.314-.625-.314-.303 0-.574.189-.27.188-.396.554-.115.366-.115 1.15v2.668h-1.47v-3.044q0-.816-.083-1.046-.073-.24-.24-.356-.156-.115-.437-.115-.344 0-.615.189-.271.177-.386.523-.115.345-.115 1.15v2.7h-1.47v-5.556Zm10.701 1.695-1.334-.24q.23-.806.771-1.193.553-.387 1.626-.387.98 0 1.46.23t.677.596q.199.356.199 1.308L412.849 39q0 .732.073 1.088.073.345.26.742h-1.449q-.052-.146-.135-.439-.042-.125-.052-.167-.376.366-.803.554-.428.178-.917.178-.855 0-1.345-.46-.49-.471-.49-1.182 0-.471.219-.837.23-.377.625-.565.407-.199 1.168-.345 1.032-.2 1.428-.367v-.146q0-.419-.209-.596-.208-.189-.792-.189-.386 0-.604.157-.22.157-.355.544Zm1.96 1.193q-.282.094-.897.23-.604.125-.792.251-.292.199-.292.513 0 .313.23.544.229.22.583.22.397 0 .761-.262.261-.199.344-.492.063-.188.063-.711v-.293Zm2.716.617v-1.465h2.877v1.465h-2.877Zm3.731 2.05v-7.668h5.661v1.297h-4.118v1.695h3.837v1.297h-3.837v2.082h4.264v1.297h-5.807Zm12.145 0h-1.47v-2.835q0-.9-.094-1.16-.093-.273-.302-.42-.208-.146-.51-.146-.376 0-.678.21-.303.209-.417.554-.115.345-.115 1.276v2.521h-1.46v-5.555h1.356v.816q.73-.941 1.824-.941.49 0 .886.178.407.167.605.44.208.271.292.616.083.346.083.994v3.452Zm1.35.367 1.668.209q.042.293.198.397.208.157.657.157.573 0 .855-.167.198-.115.291-.377.073-.178.073-.68v-.805q-.656.9-1.657.9-1.116 0-1.772-.953-.511-.742-.511-1.862 0-1.391.667-2.123.678-.743 1.668-.743 1.032 0 1.7.9v-.775h1.365v4.98q0 .994-.167 1.475-.156.492-.448.764-.292.282-.782.44-.48.156-1.23.156-1.407 0-2.002-.492-.583-.48-.583-1.224 0-.073.01-.177Zm1.303-3.264q0 .889.344 1.297.344.408.844.408.532 0 .897-.419.375-.418.375-1.244 0-.869-.354-1.287-.355-.419-.897-.419-.52 0-.865.419-.344.408-.344 1.245Zm5.353-3.41v-1.36h1.46v1.36h-1.46Zm0 6.307v-5.555h1.46v5.555h-1.46Zm8 0h-1.469v-2.835q0-.9-.094-1.16-.094-.273-.302-.42-.209-.146-.51-.146-.376 0-.679.21-.302.209-.417.554-.114.345-.114 1.276v2.521h-1.46v-5.555h1.356v.816q.73-.941 1.824-.941.49 0 .886.178.406.167.605.44.208.271.291.616.084.346.084.994v3.452Zm4.687-1.768 1.46.241q-.282.806-.887 1.235-.605.418-1.522.418-1.439 0-2.137-.952-.542-.753-.542-1.914 0-1.381.72-2.155.719-.785 1.813-.785 1.24 0 1.95.816.719.816.687 2.51h-3.669q.01.65.344 1.015.344.367.855.367.344 0 .573-.189.24-.188.355-.607Zm.083-1.485q-.01-.638-.323-.973-.313-.335-.761-.335-.48 0-.792.356-.313.345-.313.952h2.189Z"></path><path fill="none" clip-path="url(#a)" d="M0 191.917h436.338"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M0 191.917h434.052"></path><path fill="#FFF" stroke="#FFF" stroke-width="0.668" stroke-linecap="butt" clip-path="url(#a)" d="m434.052 191.917-.75.753 2.061-.753-2.061-.753Z" fill-rule="evenodd"></path><path fill="none" clip-path="url(#a)" d="M376.087 121.904H624v38.95H376.087Z"></path><clipPath id="b"><path d="M0 0h624v243H0V0Z"></path></clipPath><path fill="#FFF" clip-path="url(#b)" d="M384.593 138.214v-6.371h-2.273v-1.297h6.078v1.297h-2.262v6.371h-1.543Zm5.092-3.86-1.334-.24q.23-.806.772-1.194.552-.387 1.626-.387.98 0 1.46.23.479.23.677.597.198.356.198 1.308l-.021 1.715q0 .733.073 1.088.073.345.26.743h-1.448q-.053-.146-.136-.44-.042-.125-.052-.167-.375.366-.803.555-.427.178-.917.178-.855 0-1.345-.46-.49-.472-.49-1.183 0-.47.219-.837.23-.376.626-.565.406-.199 1.167-.345 1.032-.199 1.428-.366v-.147q0-.418-.208-.596-.209-.188-.793-.188-.385 0-.604.157-.22.157-.355.544Zm1.96 1.192q-.281.094-.896.23-.605.126-.793.252-.291.198-.291.512t.229.544q.23.22.584.22.396 0 .76-.262.261-.198.345-.491.062-.189.062-.712v-.293Zm4.28 2.668h-1.46v-5.555h1.355v.785q.355-.555.626-.733.281-.178.636-.178.5 0 .97.272l-.46 1.287q-.364-.24-.688-.24-.302 0-.52.167-.21.167-.334.617-.126.44-.126 1.862v1.716Zm2.621.366 1.668.21q.042.292.198.397.209.157.657.157.573 0 .855-.168.198-.115.292-.376.073-.178.073-.68v-.806q-.657.9-1.658.9-1.115 0-1.772-.952-.51-.743-.51-1.862 0-1.392.666-2.124.678-.743 1.668-.743 1.032 0 1.7.9v-.774h1.365v4.98q0 .993-.167 1.475-.156.491-.448.763-.292.283-.782.44-.48.157-1.23.157-1.407 0-2.001-.492-.584-.481-.584-1.224 0-.073.01-.178Zm1.303-3.264q0 .89.344 1.297.344.408.845.408.531 0 .896-.418.375-.419.375-1.245 0-.868-.354-1.287-.354-.418-.896-.418-.522 0-.866.418-.344.408-.344 1.245Zm8.554 1.13 1.459.24q-.281.806-.886 1.235-.605.419-1.522.419-1.439 0-2.137-.952-.542-.754-.542-1.915 0-1.38.72-2.155.718-.785 1.813-.785 1.24 0 1.95.816.719.816.687 2.511h-3.669q.01.649.344 1.015.344.366.855.366.344 0 .573-.188.24-.189.355-.607Zm.083-1.486q-.01-.638-.323-.972-.313-.335-.761-.335-.48 0-.792.356-.313.345-.313.952h2.189Zm5.186-2.301v1.172h-1v2.238q0 .68.03.795.032.105.126.178.104.074.25.074.209 0 .594-.136l.125 1.14q-.51.22-1.157.22-.396 0-.72-.136-.312-.136-.468-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.668v-1.172h.668v-1.109l1.47-.858v1.967h1Zm3.998-2.113h3.054q.907 0 1.356.073.448.073.792.314.354.24.584.648.24.398.24.89 0 .544-.293.994-.281.45-.781.669.698.21 1.073.701.376.492.376 1.15 0 .524-.24 1.026-.24.492-.667.785-.417.292-1.032.366-.386.042-1.856.052h-2.606v-7.668Zm1.543 1.276v1.768h1.011q.907 0 1.126-.02.396-.053.615-.273.23-.23.23-.607 0-.355-.199-.575-.188-.22-.573-.272-.23-.02-1.324-.02l-.886-.001Zm0 3.044v2.05h1.428q.834 0 1.063-.041.344-.063.553-.303.219-.252.219-.66 0-.345-.167-.585-.167-.241-.48-.346-.312-.115-1.365-.115h-1.251Zm6.155 3.348v-7.668h1.46v7.668h-1.46Zm2.622-2.856q0-.732.355-1.412.365-.69 1.021-1.046.667-.367 1.48-.367 1.252 0 2.054.816.803.816.803 2.072 0 1.255-.813 2.092-.803.827-2.033.827-.761 0-1.46-.346-.687-.345-1.052-1.014-.355-.67-.355-1.622Zm1.501.073q0 .827.386 1.266.396.44.97.44.573 0 .959-.44.396-.44.396-1.276 0-.816-.396-1.256-.386-.439-.96-.439-.573 0-.969.44-.386.439-.386 1.265Zm10.19-1.13-1.449.262q-.073-.44-.333-.66-.25-.219-.667-.219-.543 0-.876.387-.323.377-.323 1.266 0 .983.333 1.391.334.408.886.408.417 0 .678-.23.271-.24.386-.826l1.438.25q-.229.995-.865 1.507-.636.503-1.7.503-1.219 0-1.938-.764-.72-.774-.72-2.134 0-1.381.72-2.145.73-.764 1.96-.764 1.01 0 1.605.44.605.429.865 1.328Zm1.058 3.913v-7.668h1.46v4.07l1.72-1.957h1.803l-1.897 2.03 2.033 3.525h-1.585l-1.386-2.5-.688.722v1.778h-1.46Zm10.816-3.913-1.45.262q-.072-.44-.333-.66-.25-.219-.667-.219-.542 0-.876.387-.323.377-.323 1.266 0 .983.334 1.391.333.408.886.408.417 0 .678-.23.27-.24.385-.826l1.439.25q-.23.995-.865 1.507-.636.503-1.7.503-1.22 0-1.939-.764-.719-.774-.719-2.134 0-1.381.72-2.145.73-.764 1.96-.764 1.01 0 1.605.44.604.429.865 1.328Zm2.57-3.755v2.814q.708-.827 1.688-.827.511 0 .918.189.406.188.604.481.209.293.282.649.083.355.083 1.098v3.264h-1.47v-2.94q0-.868-.083-1.098-.084-.24-.292-.377-.209-.146-.532-.146-.365 0-.656.178-.282.178-.417.544-.126.355-.126 1.056v2.783h-1.47v-7.668h1.47Zm6.155 3.808-1.334-.24q.23-.806.771-1.194.553-.387 1.626-.387.98 0 1.46.23t.677.597q.199.356.199 1.308l-.021 1.715q0 .733.073 1.088.073.345.26.743h-1.449q-.052-.146-.135-.44-.042-.125-.052-.167-.376.366-.803.555-.428.178-.917.178-.855 0-1.345-.46-.49-.472-.49-1.183 0-.47.219-.837.23-.376.625-.565.407-.199 1.168-.345 1.032-.199 1.428-.366v-.147q0-.418-.209-.596-.208-.188-.792-.188-.385 0-.604.157-.22.157-.355.544Zm1.96 1.192q-.281.094-.897.23-.604.126-.792.252-.292.198-.292.512t.23.544q.229.22.583.22.397 0 .761-.262.261-.198.344-.491.063-.189.063-.712v-.293Zm2.882-3.64v-1.36h1.46v1.36h-1.46Zm0 6.308v-5.555h1.46v5.555h-1.46Zm8.001 0h-1.47v-2.835q0-.9-.094-1.161-.093-.272-.302-.419-.208-.146-.51-.146-.376 0-.678.209-.303.21-.417.554-.115.346-.115 1.277v2.521h-1.46v-5.555h1.356v.816q.73-.942 1.824-.942.49 0 .886.178.407.168.605.44.208.272.292.617.083.345.083.994v3.452Zm5.483 0-1.75-5.555h1.417l1.042 3.64.949-3.64h1.418l.917 3.64 1.063-3.64h1.439l-1.772 5.555h-1.408l-.959-3.578-.938 3.578h-1.418Zm7.272-6.308v-1.36h1.459v1.36h-1.46Zm0 6.308v-5.555h1.459v5.555h-1.46Zm5.498-5.555v1.172h-1v2.238q0 .68.031.795.031.105.125.178.104.074.25.074.209 0 .594-.136l.126 1.14q-.511.22-1.158.22-.396 0-.719-.136-.313-.136-.469-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1Zm2.481-2.113v2.814q.71-.827 1.69-.827.51 0 .917.189.406.188.604.481.209.293.282.649.083.355.083 1.098v3.264h-1.47v-2.94q0-.868-.083-1.098-.084-.24-.292-.377-.209-.146-.532-.146-.365 0-.656.178-.282.178-.417.544-.126.355-.126 1.056v2.783h-1.47v-7.668h1.47Zm4.718 4.812q0-.732.354-1.412.365-.69 1.022-1.046.667-.367 1.48-.367 1.25 0 2.053.816.803.816.803 2.072 0 1.255-.813 2.092-.803.827-2.033.827-.76 0-1.46-.346-.687-.345-1.052-1.014-.354-.67-.354-1.622Zm1.5.073q0 .827.386 1.266.397.44.97.44t.959-.44q.396-.44.396-1.276 0-.816-.396-1.256-.386-.439-.96-.439-.572 0-.969.44-.385.439-.385 1.265Zm9.002 2.783v-.837q-.302.45-.792.711-.49.252-1.042.252-.553 0-1.001-.241-.438-.251-.636-.69-.198-.45-.198-1.235v-3.515h1.46v2.553q0 1.171.083 1.433.083.261.292.418.218.157.542.157.375 0 .667-.21.302-.208.406-.512.115-.303.115-1.496v-2.343h1.47v5.555h-1.366Zm5.416-5.555v1.172h-1.001v2.238q0 .68.031.795.032.105.125.178.105.074.25.074.21 0 .595-.136l.125 1.14q-.51.22-1.157.22-.396 0-.72-.136-.312-.136-.469-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1ZM382.873 143.4h3.054q.907 0 1.356.074.448.073.792.314.354.24.584.648.24.398.24.89 0 .544-.293.994-.281.45-.781.67.698.208 1.073.7.376.492.376 1.15 0 .524-.24 1.026-.24.492-.667.785-.417.292-1.032.366-.386.042-1.856.052h-2.606v-7.668Zm1.543 1.277v1.768h1.011q.907 0 1.126-.02.396-.053.615-.273.23-.23.23-.607 0-.355-.199-.575-.187-.22-.573-.272-.23-.02-1.324-.02h-.886Zm0 3.044v2.05h1.428q.834 0 1.063-.041.344-.063.553-.303.219-.251.219-.66 0-.345-.167-.585t-.48-.346q-.312-.115-1.365-.115h-1.251Zm6.156 3.348v-7.668h1.459v7.668h-1.46Zm2.621-2.856q0-.732.355-1.412.365-.69 1.021-1.046.667-.367 1.48-.367 1.252 0 2.054.816.803.816.803 2.072 0 1.255-.813 2.092-.803.827-2.033.827-.761 0-1.46-.346-.687-.345-1.052-1.014-.355-.67-.355-1.622Zm1.501.073q0 .827.386 1.266.396.44.97.44.573 0 .959-.44.396-.44.396-1.276 0-.816-.396-1.256-.386-.439-.96-.439-.573 0-.969.44-.386.439-.386 1.265Zm10.19-1.13-1.449.262q-.073-.44-.333-.66-.25-.219-.667-.219-.542 0-.876.387-.323.377-.323 1.266 0 .983.333 1.392.334.407.886.407.417 0 .678-.23.271-.24.386-.826l1.438.251q-.229.994-.865 1.506-.636.503-1.7.503-1.219 0-1.938-.764-.72-.774-.72-2.134 0-1.381.72-2.145.73-.764 1.96-.764 1.01 0 1.605.44.605.429.865 1.328Zm1.058 3.913v-7.668h1.46v4.07l1.72-1.957h1.803l-1.897 2.03 2.033 3.525h-1.585l-1.386-2.5-.688.722v1.778h-1.46Zm8.82.366 1.667.21q.042.292.199.397.208.157.656.157.574 0 .855-.168.198-.115.292-.376.073-.178.073-.68v-.806q-.657.9-1.658.9-1.115 0-1.772-.952-.51-.743-.51-1.862 0-1.391.667-2.124.677-.743 1.668-.743 1.032 0 1.699.9v-.774h1.365v4.98q0 .993-.166 1.475-.157.491-.449.763-.292.283-.781.44-.48.157-1.23.157-1.408 0-2.002-.492-.584-.481-.584-1.224 0-.073.01-.178Zm1.303-3.264q0 .89.344 1.297.344.408.844.408.532 0 .897-.418.375-.418.375-1.245 0-.868-.355-1.287-.354-.418-.896-.418-.521 0-.865.418-.344.408-.344 1.245Zm8.553 1.13 1.46.24q-.282.806-.887 1.235-.604.419-1.522.419-1.438 0-2.137-.952-.542-.754-.542-1.915 0-1.38.72-2.155.719-.785 1.813-.785 1.24 0 1.95.816.719.816.688 2.511h-3.67q.01.649.344 1.015.344.366.855.366.344 0 .574-.188.24-.188.354-.607Zm.083-1.485q-.01-.639-.323-.973-.313-.335-.76-.335-.48 0-.793.356-.313.345-.313.952h2.19Zm7.688 3.253h-1.47v-2.835q0-.9-.093-1.161-.094-.272-.303-.419-.208-.146-.51-.146-.376 0-.678.21-.302.208-.417.554-.115.345-.115 1.276v2.521h-1.46v-5.555h1.356v.816q.73-.942 1.824-.942.49 0 .886.178.407.168.605.44.209.272.292.617.083.345.083.994v3.452Zm4.686-1.768 1.46.24q-.282.806-.886 1.235-.605.419-1.522.419-1.439 0-2.137-.952-.543-.754-.543-1.915 0-1.38.72-2.155.72-.785 1.814-.785 1.24 0 1.949.816.72.816.688 2.511h-3.67q.011.649.345 1.015.344.366.854.366.344 0 .574-.188.24-.188.354-.607Zm.084-1.485q-.01-.639-.324-.973-.312-.335-.76-.335-.48 0-.793.356-.313.345-.313.952h2.19Zm4.05 3.253h-1.46v-5.555h1.355v.785q.355-.555.626-.733.281-.178.636-.178.5 0 .97.272l-.46 1.287q-.364-.24-.688-.24-.302 0-.52.167-.21.167-.334.617-.125.44-.125 1.862v1.716Zm3.851-3.86-1.334-.24q.23-.806.771-1.193.553-.388 1.627-.388.98 0 1.46.23.479.23.677.597.198.356.198 1.308l-.021 1.715q0 .733.073 1.088.073.346.26.743h-1.449q-.052-.146-.135-.44-.042-.125-.052-.167-.375.366-.803.555-.427.178-.917.178-.855 0-1.345-.46-.49-.472-.49-1.183 0-.47.219-.837.23-.376.625-.565.407-.198 1.168-.345 1.032-.199 1.428-.366v-.147q0-.418-.208-.596-.209-.188-.793-.188-.385 0-.604.157-.22.157-.355.544Zm1.96 1.192q-.281.095-.896.23-.605.126-.793.252-.291.198-.291.512t.229.544q.23.22.584.22.396 0 .76-.262.261-.198.345-.491.062-.189.062-.712v-.293Zm5.416-2.887v1.172h-1.001v2.238q0 .68.031.796.031.104.125.177.105.074.25.074.209 0 .595-.136l.125 1.14q-.511.22-1.157.22-.396 0-.72-.136-.312-.136-.469-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1Zm1.021-.753v-1.36h1.46v1.36h-1.46Zm0 6.308v-5.555h1.46v5.555h-1.46Zm2.622-2.856q0-.732.354-1.412.365-.69 1.022-1.046.667-.367 1.48-.367 1.251 0 2.054.816.803.816.803 2.072 0 1.255-.813 2.092-.803.827-2.033.827-.761 0-1.46-.346-.688-.345-1.053-1.014-.354-.67-.354-1.622Zm1.501.073q0 .827.386 1.266.396.44.97.44.573 0 .958-.44.397-.44.397-1.276 0-.816-.397-1.256-.385-.439-.959-.439-.573 0-.97.44-.385.439-.385 1.265Zm10.399 2.783h-1.47v-2.835q0-.9-.094-1.161-.094-.272-.302-.419-.209-.146-.511-.146-.375 0-.678.21-.302.208-.417.554-.114.345-.114 1.276v2.521h-1.46v-5.555h1.355v.816q.73-.942 1.825-.942.49 0 .886.178.406.168.604.44.209.272.292.617.084.345.084.994v3.452Zm5.483 0-1.751-5.555h1.417l1.043 3.64.948-3.64h1.418l.918 3.64 1.063-3.64h1.438l-1.772 5.555h-1.407l-.96-3.578-.937 3.578h-1.418Zm7.271-6.308v-1.36h1.46v1.36h-1.46Zm0 6.308v-5.555h1.46v5.555h-1.46Zm5.499-5.555v1.172h-1v2.238q0 .68.03.796.032.104.126.177.104.074.25.074.208 0 .594-.136l.125 1.14q-.51.22-1.157.22-.396 0-.72-.136-.312-.136-.469-.346-.145-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1Zm2.48-2.113v2.814q.71-.827 1.69-.827.51 0 .917.189.407.188.605.481.208.293.281.649.084.355.084 1.098v3.264h-1.47v-2.94q0-.868-.084-1.098-.083-.24-.292-.377-.208-.146-.531-.146-.365 0-.657.178-.281.178-.417.544-.125.355-.125 1.056v2.783h-1.47v-7.668h1.47Zm12.854 3.755-1.449.262q-.073-.44-.333-.66-.25-.219-.667-.219-.542 0-.876.387-.323.377-.323 1.266 0 .983.333 1.392.334.407.886.407.417 0 .678-.23.271-.24.386-.826l1.438.251q-.229.994-.865 1.506-.636.503-1.7.503-1.219 0-1.938-.764-.72-.774-.72-2.134 0-1.381.72-2.145.73-.764 1.96-.764 1.01 0 1.605.44.605.429.865 1.328Zm.767 1.057q0-.732.354-1.412.365-.69 1.022-1.046.667-.367 1.48-.367 1.25 0 2.054.816.802.816.802 2.072 0 1.255-.813 2.092-.803.827-2.033.827-.76 0-1.46-.346-.687-.345-1.052-1.014-.354-.67-.354-1.622Zm1.5.073q0 .827.386 1.266.397.44.97.44t.959-.44q.396-.44.396-1.276 0-.816-.396-1.256-.386-.439-.96-.439-.572 0-.969.44-.385.439-.385 1.265Zm10.4 2.783h-1.47v-2.835q0-.9-.095-1.161-.093-.272-.302-.419-.208-.146-.51-.146-.376 0-.678.21-.303.208-.417.554-.115.345-.115 1.276v2.521h-1.46v-5.555h1.356v.816q.73-.942 1.824-.942.49 0 .886.178.407.168.605.44.208.272.292.617.083.345.083.994v3.452Zm.963-1.59 1.47-.22q.094.43.376.649.291.22.813.22.563 0 .855-.21.187-.146.187-.387 0-.167-.104-.282-.104-.105-.49-.189-1.772-.397-2.241-.721-.657-.45-.657-1.245 0-.722.563-1.214.573-.492 1.762-.492 1.136 0 1.688.377.553.366.761 1.088l-1.376.262q-.093-.325-.344-.492-.24-.178-.698-.178-.584 0-.834.157-.167.115-.167.303 0 .157.146.262.198.146 1.366.418 1.178.262 1.636.649.459.398.459 1.098 0 .764-.636 1.319-.636.544-1.876.544-1.137 0-1.793-.46-.657-.461-.866-1.256Zm8.992-3.965v1.172h-1.001v2.238q0 .68.031.796.031.104.125.177.104.074.25.074.209 0 .595-.136l.125 1.14q-.511.22-1.158.22-.396 0-.719-.136-.313-.136-.469-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1Zm2.116 1.695-1.335-.24q.23-.806.772-1.193.552-.388 1.626-.388.98 0 1.46.23.479.23.677.597.198.356.198 1.308l-.02 1.715q0 .733.072 1.088.073.346.26.743h-1.448q-.052-.146-.136-.44-.041-.125-.052-.167-.375.366-.803.555-.427.178-.917.178-.855 0-1.345-.46-.49-.472-.49-1.183 0-.47.22-.837.229-.376.625-.565.406-.198 1.167-.345 1.032-.199 1.428-.366v-.147q0-.418-.208-.596-.208-.188-.792-.188-.386 0-.605.157-.219.157-.354.544Zm1.96 1.192q-.282.095-.897.23-.605.126-.792.252-.292.198-.292.512t.23.544q.228.22.583.22.396 0 .76-.262.262-.198.345-.491.063-.189.063-.712v-.293Zm7.917 2.668h-1.47v-2.835q0-.9-.094-1.161-.094-.272-.302-.419-.209-.146-.51-.146-.376 0-.678.21-.303.208-.417.554-.115.345-.115 1.276v2.521h-1.46v-5.555h1.356v.816q.73-.942 1.824-.942.49 0 .886.178.407.168.605.44.208.272.292.617.083.345.083.994v3.452Zm4.019-5.555v1.172h-1.001v2.238q0 .68.031.796.031.104.125.177.104.074.25.074.209 0 .595-.136l.125 1.14q-.511.22-1.157.22-.397 0-.72-.136-.313-.136-.469-.346-.146-.209-.198-.575-.052-.251-.052-1.036v-2.416h-.667v-1.172h.667v-1.109l1.47-.858v1.967h1Zm6.52 0v1.172h-1v2.238q0 .68.03.796.032.104.126.177.104.074.25.074.208 0 .594-.136l.125 1.14q-.51.22-1.157.22-.396 0-.72-.136-.312-.136-.468-.346-.146-.209-.198-.575-.053-.251-.053-1.036v-2.416h-.667v-1.172h.668v-1.109l1.47-.858v1.967h1Zm1.022-.753v-1.36h1.46v1.36h-1.46Zm0 6.308v-5.555h1.46v5.555h-1.46Zm2.85-5.555h1.356v.753q.72-.879 1.72-.879.532 0 .917.22.396.22.647.66.365-.44.782-.66.427-.22.906-.22.615 0 1.033.252.427.24.635.721.146.356.146 1.151v3.557h-1.46v-3.18q0-.827-.155-1.067-.199-.314-.626-.314-.302 0-.573.188-.271.188-.396.555-.115.366-.115 1.15v2.668h-1.47v-3.044q0-.816-.083-1.046-.073-.241-.24-.356-.156-.115-.438-.115-.344 0-.615.188-.271.178-.386.523-.114.345-.114 1.151v2.699h-1.47v-5.555Zm12.807 3.787 1.46.24q-.282.806-.886 1.235-.605.419-1.522.419-1.439 0-2.137-.952-.542-.754-.542-1.915 0-1.38.719-2.155.72-.785 1.814-.785 1.24 0 1.95.816.718.816.687 2.511h-3.67q.011.649.345 1.015.344.366.855.366.344 0 .573-.188.24-.188.354-.607Zm.084-1.485q-.01-.639-.323-.973-.313-.335-.761-.335-.48 0-.793.356-.312.345-.312.952h2.189Z"></path><path fill="none" clip-path="url(#a)" d="M36.024 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M36.024 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M82.942 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M82.942 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M129.861 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M129.861 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M176.78 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M176.78 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M223.7 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M223.7 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M270.618 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M270.618 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M317.537 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M317.537 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M364.456 45.505v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M364.456 45.505v50.358"></path><path fill="none" clip-path="url(#a)" d="M24.393 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M24.393 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M42.974 162.999v50.357"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M42.974 162.999v50.357"></path><path fill="none" clip-path="url(#a)" d="M118.23 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M118.23 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M142.044 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M142.044 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M165.15 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M165.15 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M174.707 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M174.707 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M242.975 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M242.975 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M352.825 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M352.825 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M248.313 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M248.313 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M253.65 161.84v50.358"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="M253.65 161.84v50.358"></path><path fill="none" clip-path="url(#a)" d="M36.025 82.818V243"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M36.025 82.818V243"></path><path fill="none" clip-path="url(#a)" d="M82.946 82.818v155.986"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M82.946 82.818v155.986"></path><path fill="none" clip-path="url(#a)" d="M418.215 88.174h23.471v28.131h-23.471Z"></path><clipPath id="c"><path d="M0 0h624v243H0V0Z"></path></clipPath><path fill="#FFF" clip-path="url(#c)" d="m427.43 105.215.156.973q-.459.094-.823.094-.595 0-.928-.188-.323-.189-.459-.492-.135-.314-.135-1.297v-3.735h-.803v-.847h.803v-1.6l1.084-.66v2.26h1.105v.847h-1.105v3.798q0 .46.052.596.062.136.188.22.135.073.385.073.178 0 .48-.042Z"></path><path fill="none" clip-path="url(#a)" d="M418.215 191.917h23.471v28.13h-23.471Z"></path><path fill="#FFF" clip-path="url(#c)" d="m427.43 208.957.156.973q-.459.094-.823.094-.595 0-.928-.188-.323-.188-.459-.492-.135-.313-.135-1.297v-3.735h-.803v-.847h.803v-1.6l1.084-.66v2.26h1.105v.847h-1.105v3.798q0 .46.052.596.062.136.188.22.135.073.385.073.178 0 .48-.042Z"></path><path fill="none" clip-path="url(#a)" d="M14.856 0h140.852v23.808H14.856Z"></path><clipPath id="d"><path d="M0 0h624v243H0V0Z"></path></clipPath><path fill="#FFF" clip-path="url(#d)" d="M21.507 14.596V8.204h2.398q.73 0 1.167.199.438.188.688.596.25.408.25.847 0 .408-.229.774-.219.356-.657.576.574.167.887.586.312.408.312.962 0 .45-.198.837-.187.387-.469.596-.27.21-.688.314-.417.105-1.032.105h-2.429Zm.845-3.704h1.376q.562 0 .802-.073.323-.094.48-.314.167-.23.167-.565 0-.313-.157-.554-.146-.24-.427-.335-.282-.094-.97-.094h-1.271v1.935Zm0 2.95h1.584q.407 0 .573-.03.292-.053.49-.168.198-.126.324-.356.125-.24.125-.544 0-.356-.188-.617-.177-.272-.5-.377-.324-.104-.939-.104h-1.47v2.197Zm5.013.754V8.204h.782v6.392h-.782Zm1.694-2.312q0-1.287.72-1.904.594-.513 1.449-.513.948 0 1.553.628.604.617.604 1.726 0 .89-.27 1.402-.261.513-.772.795-.51.282-1.115.282-.97 0-1.575-.617-.594-.627-.594-1.8Zm.803 0q0 .89.386 1.328.396.44.98.44.583 0 .969-.44.386-.45.386-1.36 0-.857-.396-1.297-.386-.44-.96-.44-.583 0-.98.44-.385.44-.385 1.329Zm7.447.617.772.105q-.126.795-.647 1.245-.521.45-1.282.45-.938 0-1.522-.618-.573-.627-.573-1.778 0-.753.25-1.318.25-.565.75-.837.511-.283 1.105-.283.751 0 1.23.387.48.377.616 1.078l-.761.115q-.115-.47-.397-.701-.27-.24-.656-.24-.594 0-.97.428-.365.43-.365 1.34 0 .94.355 1.36.365.418.938.418.459 0 .761-.283.313-.282.396-.868Zm1.444 1.695V8.204h.782v3.65l1.845-1.882h1.011l-1.762 1.716 1.94 2.908h-.96l-1.522-2.364-.552.533v1.83h-.782Zm9.992-2.5v-.754l2.69-.01v2.375q-.616.502-1.283.753-.657.24-1.355.24-.938 0-1.71-.397-.76-.408-1.157-1.161-.386-.764-.386-1.706 0-.941.386-1.747.396-.805 1.126-1.192.73-.398 1.678-.398.688 0 1.24.23.564.22.876.628.324.398.49 1.036l-.76.209q-.146-.481-.355-.764-.208-.282-.605-.45-.396-.167-.875-.167-.584 0-1.011.178-.417.178-.678.47-.25.283-.396.628-.24.586-.24 1.287 0 .848.292 1.423.292.575.844.858.563.282 1.2.282.541 0 1.062-.209.522-.22.793-.46v-1.182h-1.866Zm6.99 1.014.802.094q-.188.712-.709 1.11-.51.386-1.313.386-1.012 0-1.606-.627-.594-.628-.594-1.747 0-1.172.594-1.81.605-.649 1.564-.649.928 0 1.511.628.584.628.584 1.778v.21h-3.44q.042.763.428 1.171.385.398.959.398.437 0 .74-.22.302-.23.48-.722Zm-2.565-1.276h2.575q-.052-.575-.292-.868-.375-.46-.97-.46-.542 0-.907.366-.364.355-.406.962Zm4.351 2.762V9.972h.709v.659q.5-.764 1.46-.764.416 0 .77.147.355.146.522.397.177.24.25.576.042.22.042.763v2.846h-.782v-2.814q0-.482-.094-.712-.094-.24-.323-.376-.23-.147-.542-.147-.5 0-.865.314t-.365 1.203v2.532h-.782Zm8.104-1.486.803.094q-.188.712-.71 1.11-.51.386-1.313.386-1.01 0-1.605-.627-.594-.628-.594-1.747 0-1.172.594-1.81.605-.649 1.564-.649.927 0 1.511.628.584.628.584 1.778v.21h-3.44q.042.763.427 1.171.386.398.96.398.437 0 .74-.22.302-.23.479-.722Zm-2.564-1.276h2.574q-.052-.575-.291-.868-.376-.46-.97-.46-.542 0-.907.366-.365.355-.406.962Zm4.34 2.762V9.972h.71v.7q.27-.49.49-.648.228-.157.51-.157.396 0 .803.251l-.271.722q-.292-.167-.574-.167-.26 0-.469.157-.198.157-.281.429-.136.418-.136.91v2.427h-.782Zm5.985-.576q-.438.377-.845.534-.396.146-.855.146-.76 0-1.167-.366-.407-.376-.407-.962 0-.335.146-.617.157-.283.407-.45.25-.168.563-.262.229-.052.698-.115.949-.115 1.397-.272v-.199q0-.48-.219-.68-.302-.261-.896-.261-.542 0-.814.199-.26.188-.385.68l-.761-.105q.104-.492.344-.795.24-.303.688-.46.448-.168 1.042-.168.594 0 .96.136.375.136.541.356.178.21.25.533.032.2.032.722v1.046q0 1.088.052 1.381.052.293.198.555h-.813q-.125-.24-.156-.576Zm-.063-1.747q-.427.178-1.282.293-.48.074-.678.168-.198.083-.313.25-.104.168-.104.367 0 .314.23.523.24.21.698.21.448 0 .803-.2.354-.198.52-.544.126-.261.126-.784v-.283Zm3.705 1.622.115.69q-.334.074-.595.074-.427 0-.667-.136-.23-.136-.323-.356-.094-.22-.094-.931v-2.657h-.573v-.607h.573v-1.15l.782-.472v1.622h.782v.607h-.782v2.71q0 .334.031.428.042.094.136.157.094.052.27.052.136 0 .345-.031Zm.771-4.781v-.91h.782v.91h-.782Zm0 5.482V9.972h.782v4.624h-.782Zm1.673-2.312q0-1.287.72-1.904.594-.513 1.449-.513.948 0 1.553.628.605.617.605 1.726 0 .89-.271 1.402-.261.513-.772.795-.51.282-1.115.282-.97 0-1.574-.617-.595-.627-.595-1.8Zm.803 0q0 .89.386 1.328.396.44.98.44.583 0 .97-.44.385-.45.385-1.36 0-.857-.396-1.297-.386-.44-.96-.44-.583 0-.98.44-.385.44-.385 1.329Zm4.435 2.312V9.972h.709v.659q.5-.764 1.459-.764.417 0 .771.147.355.146.522.397.177.24.25.576.041.22.041.763v2.846h-.781v-2.814q0-.482-.094-.712-.094-.24-.323-.376-.23-.147-.542-.147-.5 0-.866.314-.364.314-.364 1.203v2.532h-.782Z"></path><path fill="none" clip-path="url(#a)" d="m37.42 23.12-.694 13.982"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="m37.42 23.12-.495 9.97"></path><path fill="#FFF" stroke="#FFF" stroke-width="0.668" stroke-linecap="butt" clip-path="url(#a)" d="m35.824 33.035.95 3.09 1.251-2.98Z" fill-rule="evenodd"></path><path fill="none" clip-path="url(#a)" d="M38.813 24.52 78.55 37.805"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="m38.813 24.52 35.938 12.015"></path><path fill="#FFF" stroke="#FFF" stroke-width="0.668" stroke-linecap="butt" clip-path="url(#a)" d="m74.403 37.584 3.22-.088-2.524-2.01Z" fill-rule="evenodd"></path><path fill="none" clip-path="url(#a)" d="m40.207 23.82 82.939 15.394"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" clip-path="url(#a)" d="m40.207 23.82 79.003 14.664"></path><path fill="#FFF" stroke="#FFF" stroke-width="0.668" stroke-linecap="butt" clip-path="url(#a)" d="m119.01 39.571 3.177-.535-2.777-1.64Z" fill-rule="evenodd"></path><path fill="none" clip-path="url(#a)" d="M129.86 82.818V243"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M129.86 82.818V243"></path><path fill="none" clip-path="url(#a)" d="M176.781 82.818v155.986"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M176.781 82.818v155.986"></path><path fill="none" clip-path="url(#a)" d="M223.7 82.818V243"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M223.7 82.818V243"></path><path fill="none" clip-path="url(#a)" d="M270.62 82.818v155.986"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M270.62 82.818v155.986"></path><path fill="none" clip-path="url(#a)" d="M317.534 82.818V243"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M317.534 82.818V243"></path><path fill="none" clip-path="url(#a)" d="M364.455 82.818v155.986"></path><path stroke="#FFF" stroke-width="0.668" stroke-linejoin="round" stroke-linecap="butt" stroke-dasharray="0.6683493946765215,2.005048184029565" clip-path="url(#a)" d="M364.455 82.818v155.986"></path></svg><p>Note that the emulated block time cannot be too fast, or it would lead to non-determinism. This is because you might <em>think</em> there isn&#x27;t a block in a specific time interval, but really there was an it just hasn&#x27;t propagated to your node yet.</p><p>That means that to enable emulated block, we use the following environment variable:</p><ol><li><code>EMULATED_BLOCKS=true</code> required to enable emulated block mode</li><li><code>BLOCK_TIME</code> the frquency of emulated blocks (in seconds)</li><li><code>EMULATED_BLOCKS_MAX_WAIT</code> max network delay for a block to propagate to your node (in seconds)</li></ol><p>So if you set <code>BLOCK_TIME</code> to 5 seconds, you will essentially be tricking the database into thinking that there is a block every 5 seconds. In real human time, the time between updates is split into two cases:</p><ol><li>We receieve a block that, timestamp-wise, would go in the next slot. Assuming no rollback, that means there can&#x27;t be any other new block in this slot, so we generate the emulated block for slot <em>n</em> early.<svg viewBox="0 0 414 243" width="414" height="243" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" stroke-miterlimit="10" stroke-linecap="square" fill="none" class="img-full" style="height:auto"><clipPath id="a"><path d="M0 0h624v243H0V0z"></path></clipPath><clipPath id="b"><path d="M0 0h624v243H0V0z"></path></clipPath><title>Layer 1</title><path d="M-53.448 82.576H382.89" clip-path="url(#a)" fill="none"></path><path d="M6.89 82.576h373.714" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path fill-rule="evenodd" d="m380.604 82.576-.75.753 2.06-.753-2.06-.753.75.753z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M-53.448 191.917H382.89" clip-path="url(#a)" fill="none"></path><path d="M7.568 191.917h373.036" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path fill-rule="evenodd" d="m380.604 191.917-.75.753 2.06-.753-2.06-.753.75.753z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M29.494 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M29.494 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M76.413 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M76.413 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M123.332 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M123.332 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M64.782 161.84v50.358" clip-path="url(#a)" fill="none"></path><path d="M64.782 161.84v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M88.595 161.84v50.358" clip-path="url(#a)" fill="none"></path><path d="M88.595 161.84v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M104.649 162.858v50.357" clip-path="url(#a)" fill="none"></path><path d="M104.649 145.909v85.611" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#AAA"></path><path d="M29.498 82.818v155.986" clip-path="url(#a)" fill="none"></path><path d="M29.498 82.818v155.986" clip-path="url(#a)" stroke-dasharray="0.6683493946765215,2.005048184029565" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M364.766 88.174h23.472v28.131h-23.472v-28.13z" clip-path="url(#a)" fill="none"></path><path d="m373.981 105.215.157.973q-.459.094-.824.094-.594 0-.927-.188-.324-.189-.46-.492-.135-.314-.135-1.297v-3.735h-.802v-.847h.802v-1.6l1.085-.66v2.26h1.104v.847h-1.104v3.798q0 .46.052.596.062.136.187.22.136.073.386.073.177 0 .48-.042z" clip-path="url(#b)" fill="#FFF"></path><path d="M364.766 191.917h23.472v28.13h-23.472v-28.13z" clip-path="url(#a)" fill="none"></path><path d="m373.981 208.957.157.973q-.459.094-.824.094-.594 0-.927-.188-.324-.188-.46-.492-.135-.313-.135-1.297v-3.735h-.802v-.847h.802v-1.6l1.085-.66v2.26h1.104v.847h-1.104v3.798q0 .46.052.596.062.136.187.22.136.073.386.073.177 0 .48-.042z" clip-path="url(#b)" fill="#FFF"></path><path transform="rotate(13.176 39.14 32.1)" d="M45.338 21.9 32.944 42.3" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(109.672 30.391 41.512)" fill-rule="evenodd" d="m28.78 42.561 3.221-.089-2.524-2.01-.696 2.099z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="m47.436 22.803 18.325 15.68" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(34.64 66.81 39.162)" fill-rule="evenodd" d="m65.222 40.249 3.178-.535-2.777-1.64-.401 2.175z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M76.412 82.818V243" clip-path="url(#a)" fill="none"></path><path d="M76.412 82.818V243M123.333 82.818v155.986" clip-path="url(#a)" stroke-dasharray="0.6683493946765215,2.005048184029565" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><text style="cursor:move" font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" stroke-width="0" y="126.776" x="130.759" fill="#fff">BLOCK_TIME + EMULATED_BLOCKS_MAX_WAIT</text><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" stroke-width="0" y="18.845" x="27.311" fill="#fff">BLOCK_TIME</text><path transform="rotate(18.605 119.831 131.065)" d="m126.028 120.866-12.395 20.398" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(109.672 110.046 140.477)" fill-rule="evenodd" d="m108.436 141.527 3.22-.09-2.524-2.009-.696 2.099z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" y="77.121" x="48.173" stroke-width="0" fill="#FFF">n</text><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" y="77.121" x="91.621" stroke-width="0" fill="#FFF">n+1</text></svg></li><li><code>BLOCK_TIME + EMULATED_BLOCKS_MAX_WAIT</code> passes, so we assume there are no new blocks coming and we create the emulated block for slot <em>n</em>.<svg viewBox="0 0 414 243" width="414" height="243" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" stroke-miterlimit="10" stroke-linecap="square" fill="none" class="img-full" style="height:auto"><clipPath id="a"><path d="M0 0h624v243H0V0z"></path></clipPath><clipPath id="b"><path d="M0 0h624v243H0V0z"></path></clipPath><title>Layer 1</title><path d="M-53.448 82.576H382.89" clip-path="url(#a)" fill="none"></path><path d="M6.89 82.576h373.714" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path fill-rule="evenodd" d="m380.604 82.576-.75.753 2.06-.753-2.06-.753.75.753z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M-53.448 191.917H382.89" clip-path="url(#a)" fill="none"></path><path d="M7.568 191.917h373.036" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path fill-rule="evenodd" d="m380.604 191.917-.75.753 2.06-.753-2.06-.753.75.753z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M29.494 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M29.494 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M76.413 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M76.413 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M123.332 45.505v50.358" clip-path="url(#a)" fill="none"></path><path d="M123.332 45.505v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M64.782 161.84v50.358" clip-path="url(#a)" fill="none"></path><path d="M64.782 161.84v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M88.595 161.84v50.358" clip-path="url(#a)" fill="none"></path><path d="M114.227 161.84v50.358" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M104.649 162.858v50.357" clip-path="url(#a)" fill="none"></path><path d="M104.649 145.909v85.611" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#AAA"></path><path d="M29.498 82.818v155.986" clip-path="url(#a)" fill="none"></path><path d="M29.498 82.818v155.986" clip-path="url(#a)" stroke-dasharray="0.6683493946765215,2.005048184029565" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path d="M364.766 88.174h23.472v28.131h-23.472v-28.13z" clip-path="url(#a)" fill="none"></path><path d="m373.981 105.215.157.973q-.459.094-.824.094-.594 0-.927-.188-.324-.189-.46-.492-.135-.314-.135-1.297v-3.735h-.802v-.847h.802v-1.6l1.085-.66v2.26h1.104v.847h-1.104v3.798q0 .46.052.596.062.136.187.22.136.073.386.073.177 0 .48-.042z" clip-path="url(#b)" fill="#FFF"></path><path d="M364.766 191.917h23.472v28.13h-23.472v-28.13z" clip-path="url(#a)" fill="none"></path><path d="m373.981 208.957.157.973q-.459.094-.824.094-.594 0-.927-.188-.324-.188-.46-.492-.135-.313-.135-1.297v-3.735h-.802v-.847h.802v-1.6l1.085-.66v2.26h1.104v.847h-1.104v3.798q0 .46.052.596.062.136.187.22.136.073.386.073.177 0 .48-.042z" clip-path="url(#b)" fill="#FFF"></path><path transform="rotate(13.176 39.14 32.1)" d="M45.338 21.9 32.944 42.3" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(109.672 30.391 41.512)" fill-rule="evenodd" d="m28.78 42.561 3.221-.089-2.524-2.01-.696 2.099z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="m47.436 22.803 18.325 15.68" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(34.64 66.81 39.162)" fill-rule="evenodd" d="m65.222 40.249 3.178-.535-2.777-1.64-.401 2.175z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><path d="M76.412 82.818V243" clip-path="url(#a)" fill="none"></path><path d="M76.412 82.818V243M123.333 82.818v155.986" clip-path="url(#a)" stroke-dasharray="0.6683493946765215,2.005048184029565" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><text style="cursor:move" font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" stroke-width="0" y="126.776" x="130.759" fill="#fff">BLOCK_TIME + EMULATED_BLOCKS_MAX_WAIT</text><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" stroke-width="0" y="18.845" x="27.311" fill="#fff">BLOCK_TIME</text><path transform="rotate(18.605 119.831 131.065)" d="m126.028 120.866-12.395 20.398" clip-path="url(#a)" stroke-linejoin="round" stroke-width="0.668" stroke="#FFF"></path><path transform="rotate(109.672 110.046 140.477)" fill-rule="evenodd" d="m108.436 141.527 3.22-.09-2.524-2.009-.696 2.099z" clip-path="url(#a)" stroke-width="0.668" stroke="#FFF" fill="#FFF"></path><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" y="77.121" x="48.173" stroke-width="0" fill="#FFF">n</text><text font-style="italic" xml:space="preserve" font-family="&#x27;Besley&#x27;" font-size="10" y="77.121" x="91.621" stroke-width="0" fill="#FFF">n+1</text></svg></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="effects-on-the-state-machine">Effects on the state machine<a href="#effects-on-the-state-machine" class="hash-link" aria-label="Effects on the state machine への直接リンク" title="Effects on the state machine への直接リンク">​</a></h2><p>Since the new base for the state machine is time intervals, the <code>ChainData</code> type now represents the aggregation of all blocks that happened during that time. Notably, that means:</p><ul><li><code>blockNumber</code>: index of the time interval since genesis,</li><li><code>blockHash</code>: See section below for calculation</li><li><code>timestamp</code>: End of the interval for the block,</li><li><code>submittedData</code>: Aggregation of all submitted data in blocks that happened during the interval</li><li><code>extensionDatums</code>: Aggregation of all extensions datums in blocks that happened during the interval</li></ul><p>Typically syncing starts with <code>START_BLOCKHEIGHT</code>, but with emulated blocks it starts with the timestamp of the block at that height.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tricky-points">Tricky points<a href="#tricky-points" class="hash-link" aria-label="Tricky points への直接リンク" title="Tricky points への直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="edge-case-for-timings">Edge-case for timings<a href="#edge-case-for-timings" class="hash-link" aria-label="Edge-case for timings への直接リンク" title="Edge-case for timings への直接リンク">​</a></h3><p>Emulated blocks are inclusive on the lower-bound, and exclusive on the upper bound</p><p>That is to say, if you have three emulated blocks:</p><ul><li><strong>EB_1</strong>: <code>[0, 3)</code></li><li><strong>EB_2</strong>: <code>[3, 6)</code></li><li><strong>EB_3</strong>: <code>[6, 9)</code></li></ul><p>Then a block on the underlying chain at time <code>3</code> would go into <em>EB_2</em>, and one at time 6 would go in in <em>EB_3</em>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pausing-on-error">Pausing on error<a href="#pausing-on-error" class="hash-link" aria-label="Pausing on error への直接リンク" title="Pausing on error への直接リンク">​</a></h3><p>Paima will stop generating emulated blocks if the connection to your RPC node fails, but it assumes your RPC provider is properly syncing blocks</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="misleading-block-timestamps-and-other-block-values">Misleading block timestamps and other block values<a href="#misleading-block-timestamps-and-other-block-values" class="hash-link" aria-label="Misleading block timestamps and other block values への直接リンク" title="Misleading block timestamps and other block values への直接リンク">​</a></h3><p>Be careful of the timestamp associated with blocks. Some L2s may be special non-trivial interpretation of block timestamps, such as having the L2 block timestamp be the timestamp of the L1 block where it was included (meaning multiple L2 blocks have the same timestamp)</p><p>See <a href="/ja/home/react-to-events/3 - L2-quirks">here</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="block-hash">Block hash<a href="#block-hash" class="hash-link" aria-label="Block hash への直接リンク" title="Block hash への直接リンク">​</a></h2><p>Emulated blocks have two cases which require two separate functions for calculating the block hash:</p><ol><li>It contains one or more blocks. In this case, set the hash to <code>base64(sha256(block.join(&#x27;,&#x27;)))</code></li><li>It contains no blocks, use the following algorithm:<ol><li>Take the emulated block number + the the randomness seed from 100¹ blocks ago, and hash them together: <code>base64(sha256([blockNumber.toString(10), prevSeed].join(&#x27;,&#x27;)))</code></li><li>Using prando, generate 20 random numbers between <code>START_BLOCKHEIGHT</code> and the current emulated block number minus 100.</li><li>For each generated blockheight number, fetch the matching randomness seed from the database.</li><li>With these 20 previous random seeds, hash them all together with the current block number, and thus generating the new emulated block hash <code>base64(sha256([blockNumber.toString(10), ...blockSeeds].join(&#x27;,&#x27;)))</code>. Adding <code>blockNumber</code> here helps avoid hash collisions during the first batch of 100 when there are no previous block seeds yet.</li></ol></li></ol><p>¹ we pick 100 for two reasons:</p><ol><li>It means the block hash if an emulated block is empty is computable by everybody ahead of time and not something that is only game-able by the current block producer</li><li>It makes it easier to batch-process when synchronizing old emulated blocks (you can batch in groups of 100 instead of one-by-one)</li></ol><p>Note that for (2), we use the randomness seed of the block and NOT the block hash. That means as long as the seed generation is random enough, then this scheme is random enough. However, we aggregate randomness from multiple blocks for two reasons:</p><ol><li>Some chains have long block times like Bitcoin (~10 minutes) and L2s (no block until a tx occurs). If we just used the previous block as randomness for all the empty emulated blocks, then all of them would have their entropy from the same place which is not ideal. This makes other old blocks also contribute.</li><li>It&#x27;s possible that a game decides to set a block&#x27;s randomness seed to something that only depends on one party, such as the VRF of a slot number for their chain. This adds in randomness from other parties</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/PaimaStudios/paima-engine-docs/docs/home/3-react-to-events/3-funnel-types/3-stable-tick-rate-funnel.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/ja/home/react-to-events/funnel-types/block-funnel"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Block Funnel</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ja/home/randomness/"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">Randomness</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problems" class="table-of-contents__link toc-highlight">Problems</a></li><li><a href="#emulated-blocks-ebs" class="table-of-contents__link toc-highlight">Emulated blocks (EBs)</a></li><li><a href="#effects-on-the-state-machine" class="table-of-contents__link toc-highlight">Effects on the state machine</a></li><li><a href="#tricky-points" class="table-of-contents__link toc-highlight">Tricky points</a><ul><li><a href="#edge-case-for-timings" class="table-of-contents__link toc-highlight">Edge-case for timings</a></li><li><a href="#pausing-on-error" class="table-of-contents__link toc-highlight">Pausing on error</a></li><li><a href="#misleading-block-timestamps-and-other-block-values" class="table-of-contents__link toc-highlight">Misleading block timestamps and other block values</a></li></ul></li><li><a href="#block-hash" class="table-of-contents__link toc-highlight">Block hash</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Paima Studios. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ja/assets/js/runtime~main.a62ea7e9.js"></script>
<script src="/ja/assets/js/main.be4ddcc3.js"></script>
</body>
</html>