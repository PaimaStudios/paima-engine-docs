import SolidityDetailBlock from '@site/src/components/SolidityDetailBlock';
import SolidityOutlineBlock from '@site/src/components/SolidityOutlineBlock';
import ContractHeader from '@site/src/components/ContractHeader';

# Solidity Contracts

Solidity contracts provided as part of Paima Engine.

Core contracts

<ul>
  <li>[PaimaL2Contract](#PaimaL2Contract): The main L2 contract for a Paima L2.</li>
</ul>
State-annotated contracts
<ul>
  <li>[AnnotatedMintNft](#AnnotatedMintNft): A standard ERC721 that accepts calldata in the mint function for any initialization data needed in a Paima dApp.</li>
</ul>
Facilitating monetization
<ul>
  <li>[NativeNftSale](#NativeNftSale): Facilitates selling NFTs that accepts extra data when buying for any initialization data needed in a Paima dApp.</li>
  <li>[GenericPayment](#GenericPayment): Facilitates accepting payment that accepts extra data to know what the payment was for inside a Paima dApp.</li>
  <li>[Erc20NftSale](#Erc20NftSale): Facilitates selling NFTs for specific ERC20s that accepts extra data when buying for any initialization data needed in a Paima dApp.</li>
</ul>

## Core contracts

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/PaimaL2Contract.sol" anchor="PaimaL2Contract">
    ### PaimaL2Contract
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/PaimaL2Contract.sol";
```

The main L2 contract for a Paima L2.

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "constructor(_owner, _fee)",
          anchor: "xref-PaimaL2Contract-constructor-address-uint256-"
        },
        {
          text: "paimaSubmitGameInput(data)",
          anchor: "xref-PaimaL2Contract-paimaSubmitGameInput-bytes-"
        },
        {
          text: "withdrawFunds()",
          anchor: "xref-PaimaL2Contract-withdrawFunds--"
        },
        {
          text: "setOwner(newOwner)",
          anchor: "xref-PaimaL2Contract-setOwner-address-"
        },
        {
          text: "setFee(newFee)",
          anchor: "xref-PaimaL2Contract-setFee-uint256-"
        },
        {
          text: "owner()",
          anchor: "xref-PaimaL2Contract-owner-address"
        },
        {
          text: "fee()",
          anchor: "xref-PaimaL2Contract-fee-uint256"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Events"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "PaimaGameInteraction(userAddress, data, value)",
          anchor: "xref-PaimaL2Contract-PaimaGameInteraction-address-bytes-uint256-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="constructor"
    params="(address _owner, uint256 _fee)"
    visibility="public"
    anchor="xref-PaimaL2Contract-constructor-address-uint256-"
>
    Sets the contract owner to `_owner` and payment fee to `_fee`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="paimaSubmitGameInput"
    params="(bytes data)"
    visibility="public"
    anchor="xref-PaimaL2Contract-paimaSubmitGameInput-bytes-"
>
    Emits the `PaimaGameInteraction` event, logging the `msg.sender`, `data`, and `msg.value`.
Revert if `msg.value` is less than set `fee`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="withdrawFunds"
    params="()"
    visibility="public"
    anchor="xref-PaimaL2Contract-withdrawFunds--"
>
    Withdraws the contract balance to the `owner`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="setOwner"
    params="(address newOwner)"
    visibility="public"
    anchor="xref-PaimaL2Contract-setOwner-address-"
>
    Sets the `newOwner` as the contract owner.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="setFee"
    params="(uint256 newFee)"
    visibility="public"
    anchor="xref-PaimaL2Contract-setFee-uint256-"
>
    Sets the `newFee` as the required payment fee.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="owner"
    params="() → address"
    visibility="public"
    anchor="xref-PaimaL2Contract-owner-address"
>
    Contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="fee"
    params="() → uint256"
    visibility="public"
    anchor="xref-PaimaL2Contract-fee-uint256"
>
    Amount in wei that is required to be paid when calling `paimaSubmitGameInput`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="PaimaGameInteraction"
    params="(address indexed userAddress, bytes data, uint256 value)"
    visibility="event"
    anchor="xref-PaimaL2Contract-PaimaGameInteraction-address-bytes-uint256-"
>
    Emitted when `paimaSubmitGameInput` function is called with `data`.
`userAddress` is the transaction sender and `value` is the transaction value.
</SolidityDetailBlock>

## State-annotated contracts

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/AnnotatedMintNft.sol" anchor="AnnotatedMintNft">
    ### AnnotatedMintNft
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/AnnotatedMintNft.sol";
```

A standard ERC721 that accepts calldata in the mint function for any initialization data needed in a Paima dApp.
Upon deployment only the contract owner (specified in constructor parameter) is able to mint tokens. Additional
minters (e.g. NativeNftSale contract) need to be added by using the `setMinter` function.

<SolidityOutlineBlock
  type="Modifiers"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "canMint()",
          anchor: "xref-AnnotatedMintNft-canMint--"
        },
        {
          text: "onlyExistingTokenId(tokenId)",
          anchor: "xref-AnnotatedMintNft-onlyExistingTokenId-uint256-"
        },
        {
          text: "onlyTokenOwner(tokenId)",
          anchor: "xref-AnnotatedMintNft-onlyTokenOwner-uint256-"
        },
      ]
    }
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "constructor(name, symbol, supply, owner)",
          anchor: "xref-AnnotatedMintNft-constructor-string-string-uint256-address-"
        },
        {
          text: "supportsInterface(interfaceID)",
          anchor: "xref-AnnotatedMintNft-supportsInterface-bytes4-"
        },
        {
          text: "mint(_to, initialData)",
          anchor: "xref-AnnotatedMintNft-mint-address-string-"
        },
        {
          text: "burn(_tokenId)",
          anchor: "xref-AnnotatedMintNft-burn-uint256-"
        },
        {
          text: "setMinter(_minter)",
          anchor: "xref-AnnotatedMintNft-setMinter-address-"
        },
        {
          text: "removeMinter(_minter)",
          anchor: "xref-AnnotatedMintNft-removeMinter-address-"
        },
        {
          text: "_baseURI()",
          anchor: "xref-AnnotatedMintNft-_baseURI--"
        },
        {
          text: "tokenURI(tokenId)",
          anchor: "xref-AnnotatedMintNft-tokenURI-uint256-"
        },
        {
          text: "setBaseURI(_URI)",
          anchor: "xref-AnnotatedMintNft-setBaseURI-string-"
        },
        {
          text: "setBaseExtension(_newBaseExtension)",
          anchor: "xref-AnnotatedMintNft-setBaseExtension-string-"
        },
        {
          text: "updateMaxSupply(_maxSupply)",
          anchor: "xref-AnnotatedMintNft-updateMaxSupply-uint256-"
        },
        {
          text: "exists(_tokenId)",
          anchor: "xref-AnnotatedMintNft-exists-uint256-"
        },
        {
          text: "isMinter(_account)",
          anchor: "xref-AnnotatedMintNft-isMinter-address-"
        },
        {
          text: "currentTokenId()",
          anchor: "xref-AnnotatedMintNft-currentTokenId-uint256"
        },
        {
          text: "baseURI()",
          anchor: "xref-AnnotatedMintNft-baseURI-string"
        },
        {
          text: "totalSupply()",
          anchor: "xref-AnnotatedMintNft-totalSupply-uint256"
        },
        {
          text: "maxSupply()",
          anchor: "xref-AnnotatedMintNft-maxSupply-uint256"
        },
        {
          text: "baseExtension()",
          anchor: "xref-AnnotatedMintNft-baseExtension-string"
        },
        {
          text: "minters()",
          anchor: "xref-AnnotatedMintNft-minters-mapping-address----bool-"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "owner()",
          anchor: "xref-Ownable-owner--"
        },
        {
          text: "_checkOwner()",
          anchor: "xref-Ownable-_checkOwner--"
        },
        {
          text: "renounceOwnership()",
          anchor: "xref-Ownable-renounceOwnership--"
        },
        {
          text: "transferOwnership(newOwner)",
          anchor: "xref-Ownable-transferOwnership-address-"
        },
        {
          text: "_transferOwnership(newOwner)",
          anchor: "xref-Ownable-_transferOwnership-address-"
        },
      ]
    },
    {
      category: "ERC721",
      lines: [
        {
          text: "balanceOf(owner)",
          anchor: "xref-ERC721-balanceOf-address-"
        },
        {
          text: "ownerOf(tokenId)",
          anchor: "xref-ERC721-ownerOf-uint256-"
        },
        {
          text: "name()",
          anchor: "xref-ERC721-name--"
        },
        {
          text: "symbol()",
          anchor: "xref-ERC721-symbol--"
        },
        {
          text: "approve(to, tokenId)",
          anchor: "xref-ERC721-approve-address-uint256-"
        },
        {
          text: "getApproved(tokenId)",
          anchor: "xref-ERC721-getApproved-uint256-"
        },
        {
          text: "setApprovalForAll(operator, approved)",
          anchor: "xref-ERC721-setApprovalForAll-address-bool-"
        },
        {
          text: "isApprovedForAll(owner, operator)",
          anchor: "xref-ERC721-isApprovedForAll-address-address-"
        },
        {
          text: "transferFrom(from, to, tokenId)",
          anchor: "xref-ERC721-transferFrom-address-address-uint256-"
        },
        {
          text: "safeTransferFrom(from, to, tokenId)",
          anchor: "xref-ERC721-safeTransferFrom-address-address-uint256-"
        },
        {
          text: "safeTransferFrom(from, to, tokenId, data)",
          anchor: "xref-ERC721-safeTransferFrom-address-address-uint256-bytes-"
        },
        {
          text: "_safeTransfer(from, to, tokenId, data)",
          anchor: "xref-ERC721-_safeTransfer-address-address-uint256-bytes-"
        },
        {
          text: "_ownerOf(tokenId)",
          anchor: "xref-ERC721-_ownerOf-uint256-"
        },
        {
          text: "_exists(tokenId)",
          anchor: "xref-ERC721-_exists-uint256-"
        },
        {
          text: "_isApprovedOrOwner(spender, tokenId)",
          anchor: "xref-ERC721-_isApprovedOrOwner-address-uint256-"
        },
        {
          text: "_safeMint(to, tokenId)",
          anchor: "xref-ERC721-_safeMint-address-uint256-"
        },
        {
          text: "_safeMint(to, tokenId, data)",
          anchor: "xref-ERC721-_safeMint-address-uint256-bytes-"
        },
        {
          text: "_mint(to, tokenId)",
          anchor: "xref-ERC721-_mint-address-uint256-"
        },
        {
          text: "_burn(tokenId)",
          anchor: "xref-ERC721-_burn-uint256-"
        },
        {
          text: "_transfer(from, to, tokenId)",
          anchor: "xref-ERC721-_transfer-address-address-uint256-"
        },
        {
          text: "_approve(to, tokenId)",
          anchor: "xref-ERC721-_approve-address-uint256-"
        },
        {
          text: "_setApprovalForAll(owner, operator, approved)",
          anchor: "xref-ERC721-_setApprovalForAll-address-address-bool-"
        },
        {
          text: "_requireMinted(tokenId)",
          anchor: "xref-ERC721-_requireMinted-uint256-"
        },
        {
          text: "_beforeTokenTransfer(from, to, firstTokenId, batchSize)",
          anchor: "xref-ERC721-_beforeTokenTransfer-address-address-uint256-uint256-"
        },
        {
          text: "_afterTokenTransfer(from, to, firstTokenId, batchSize)",
          anchor: "xref-ERC721-_afterTokenTransfer-address-address-uint256-uint256-"
        },
        {
          text: "__unsafe_increaseBalance(account, amount)",
          anchor: "xref-ERC721-__unsafe_increaseBalance-address-uint256-"
        },
      ]
    },
    {
      category: "IERC721Metadata",
      lines: [
      ]
    },
    {
      category: "IERC721",
      lines: [
      ]
    },
    {
      category: "ERC165",
      lines: [
      ]
    },
    {
      category: "IERC165",
      lines: [
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Events"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "UpdateMaxSupply(oldMaxSupply, newMaxSupply)",
          anchor: "xref-AnnotatedMintNft-UpdateMaxSupply-uint256-uint256-"
        },
        {
          text: "SetMinter(newMinter)",
          anchor: "xref-AnnotatedMintNft-SetMinter-address-"
        },
        {
          text: "RemoveMinter(oldMinter)",
          anchor: "xref-AnnotatedMintNft-RemoveMinter-address-"
        },
        {
          text: "SetBaseURI(oldUri, newUri)",
          anchor: "xref-AnnotatedMintNft-SetBaseURI-string-string-"
        },
        {
          text: "Minted(tokenId, initialData)",
          anchor: "xref-AnnotatedMintNft-Minted-uint256-string-"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "OwnershipTransferred(previousOwner, newOwner)",
          anchor: "xref-Ownable-OwnershipTransferred-address-address-"
        },
      ]
    },
    {
      category: "ERC721",
      lines: [
      ]
    },
    {
      category: "IERC721Metadata",
      lines: [
      ]
    },
    {
      category: "IERC721",
      lines: [
        {
          text: "Transfer(from, to, tokenId)",
          anchor: "xref-IERC721-Transfer-address-address-uint256-"
        },
        {
          text: "Approval(owner, approved, tokenId)",
          anchor: "xref-IERC721-Approval-address-address-uint256-"
        },
        {
          text: "ApprovalForAll(owner, operator, approved)",
          anchor: "xref-IERC721-ApprovalForAll-address-address-bool-"
        },
      ]
    },
    {
      category: "ERC165",
      lines: [
      ]
    },
    {
      category: "IERC165",
      lines: [
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="canMint"
    params="()"
    visibility="modifier"
    anchor="xref-AnnotatedMintNft-canMint--"
>
    Reverts if `msg.sender` is neither a minter nor the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="onlyExistingTokenId"
    params="(uint256 tokenId)"
    visibility="modifier"
    anchor="xref-AnnotatedMintNft-onlyExistingTokenId-uint256-"
>
    Reverts if the `tokenId` does not exist (has not been minted).
</SolidityDetailBlock>

<SolidityDetailBlock
    title="onlyTokenOwner"
    params="(uint256 tokenId)"
    visibility="modifier"
    anchor="xref-AnnotatedMintNft-onlyTokenOwner-uint256-"
>
    Reverts if `msg.sender` is not the specified token's owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="constructor"
    params="(string name, string symbol, uint256 supply, address owner)"
    visibility="public"
    anchor="xref-AnnotatedMintNft-constructor-string-string-uint256-address-"
>
    Sets the NFT's `name`, `symbol`, `maxSupply` to `supply`, and transfers ownership to `owner`.
Also sets `currentTokenId` to 1 and `baseExtension` to `".json"`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="supportsInterface"
    params="(bytes4 interfaceID) → bool"
    visibility="public"
    anchor="xref-AnnotatedMintNft-supportsInterface-bytes4-"
>
    Returns true if this contract implements the interface defined by `interfaceID`. See EIP165.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="mint"
    params="(address _to, string initialData) → uint256"
    visibility="external"
    anchor="xref-AnnotatedMintNft-mint-address-string-"
>
    Mints a new token to address `_to`, passing `initialData` to be emitted in the event.
Increases the `totalSupply` and `currentTokenId`.
Reverts if `totalSupply` is not less than `maxSupply` or if `_to` is a zero address.
Emits the `Minted` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="burn"
    params="(uint256 _tokenId)"
    visibility="external"
    anchor="xref-AnnotatedMintNft-burn-uint256-"
>
    Burns token of ID `_tokenId`. Callable only by the owner of the specified token.
Reverts if `_tokenId` is not existing.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="setMinter"
    params="(address _minter)"
    visibility="external"
    anchor="xref-AnnotatedMintNft-setMinter-address-"
>
    Adds `_minter` to the mapping of allowed `minters` of this NFT.
Callable only by the contract owner.
Emits the `SetMinter` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="removeMinter"
    params="(address _minter)"
    visibility="external"
    anchor="xref-AnnotatedMintNft-removeMinter-address-"
>
    Removes `_minter` from the mapping of allowed `minters` of this NFT.
Callable only by the contract owner.
Emits the `RemoveMinter` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_baseURI"
    params="() → string"
    visibility="internal"
    anchor="xref-AnnotatedMintNft-_baseURI--"
>
    Returns the `baseURI` of this NFT.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="tokenURI"
    params="(uint256 tokenId) → string"
    visibility="public"
    anchor="xref-AnnotatedMintNft-tokenURI-uint256-"
>
    Returns the token URI of specified `tokenId`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="setBaseURI"
    params="(string _URI)"
    visibility="external"
    anchor="xref-AnnotatedMintNft-setBaseURI-string-"
>
    Sets `_URI` as the `baseURI` of the NFT.
Callable only by the contract owner.
Emits the `SetBaseURI` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="setBaseExtension"
    params="(string _newBaseExtension)"
    visibility="public"
    anchor="xref-AnnotatedMintNft-setBaseExtension-string-"
>
    Sets `_newBaseExtension` as the `baseExtension` of the NFT.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="updateMaxSupply"
    params="(uint256 _maxSupply)"
    visibility="external"
    anchor="xref-AnnotatedMintNft-updateMaxSupply-uint256-"
>
    Sets `_maxSupply` as the `maxSupply` of the NFT.
Callable only by the contract owner.
Emits the `UpdateMaxSupply` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="exists"
    params="(uint256 _tokenId) → bool"
    visibility="external"
    anchor="xref-AnnotatedMintNft-exists-uint256-"
>
    Returns true if specified `_tokenId` exists.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="isMinter"
    params="(address _account) → bool"
    visibility="public"
    anchor="xref-AnnotatedMintNft-isMinter-address-"
>
    Returns true if `_account` is in the mapping of allowed `minters`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="currentTokenId"
    params="() → uint256"
    visibility="public"
    anchor="xref-AnnotatedMintNft-currentTokenId-uint256"
>
    The token ID that will be minted when calling the `mint` function.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="baseURI"
    params="() → string"
    visibility="public"
    anchor="xref-AnnotatedMintNft-baseURI-string"
>
    Base URI that is used in the `tokenURI` function to form the start of the token URI.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="totalSupply"
    params="() → uint256"
    visibility="public"
    anchor="xref-AnnotatedMintNft-totalSupply-uint256"
>
    Total token supply, increased by minting and decreased by burning.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="maxSupply"
    params="() → uint256"
    visibility="public"
    anchor="xref-AnnotatedMintNft-maxSupply-uint256"
>
    Maximum amount of tokens that is allowed to exist.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="baseExtension"
    params="() → string"
    visibility="public"
    anchor="xref-AnnotatedMintNft-baseExtension-string"
>
    Base extension that is used in the `tokenURI` function to form the end of the token URI.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="minters"
    params="() → mapping(address &#x3D;&gt; bool)"
    visibility="public"
    anchor="xref-AnnotatedMintNft-minters-mapping-address----bool-"
>
    Returns true for addresses that are allowed to mint this token.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="UpdateMaxSupply"
    params="(uint256 indexed oldMaxSupply, uint256 indexed newMaxSupply)"
    visibility="event"
    anchor="xref-AnnotatedMintNft-UpdateMaxSupply-uint256-uint256-"
>
    Emitted when max supply is updated from `oldMaxSupply` to `newMaxSupply`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="SetMinter"
    params="(address indexed newMinter)"
    visibility="event"
    anchor="xref-AnnotatedMintNft-SetMinter-address-"
>
    Emitted when `newMinter` is added to the mapping of allowed `minters`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="RemoveMinter"
    params="(address indexed oldMinter)"
    visibility="event"
    anchor="xref-AnnotatedMintNft-RemoveMinter-address-"
>
    Emitted when `oldMinter` is removed from the mapping of allowed `minters`
</SolidityDetailBlock>

<SolidityDetailBlock
    title="SetBaseURI"
    params="(string oldUri, string newUri)"
    visibility="event"
    anchor="xref-AnnotatedMintNft-SetBaseURI-string-string-"
>
    Emitted when `baseUri` is updated from `oldUri` to `newUri`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="Minted"
    params="(uint256 indexed tokenId, string initialData)"
    visibility="event"
    anchor="xref-AnnotatedMintNft-Minted-uint256-string-"
>
    Emitted when a new token with ID `tokenId` is minted, with `initialData` provided in the `mint` function parameters.
</SolidityDetailBlock>

## Facilitating monetization

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/NativeNftSale.sol" anchor="NativeNftSale">
    ### NativeNftSale
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/NativeNftSale.sol";
```

Facilitates selling NFTs that accepts extra data when buying for any initialization data needed in a Paima dApp.

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "initialize(owner, _nft, _price)",
          anchor: "xref-NativeNftSale-initialize-address-address-uint256-"
        },
        {
          text: "buyNft(receiverAddress, initialData)",
          anchor: "xref-NativeNftSale-buyNft-address-string-"
        },
        {
          text: "updatePrice(_nftPrice)",
          anchor: "xref-NativeNftSale-updatePrice-uint256-"
        },
        {
          text: "withdraw(_account)",
          anchor: "xref-NativeNftSale-withdraw-address-payable-"
        },
        {
          text: "upgradeContract(_newContract)",
          anchor: "xref-NativeNftSale-upgradeContract-address-"
        },
        {
          text: "receive()",
          anchor: "xref-NativeNftSale-receive--"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "owner()",
          anchor: "xref-Ownable-owner--"
        },
        {
          text: "_checkOwner()",
          anchor: "xref-Ownable-_checkOwner--"
        },
        {
          text: "renounceOwnership()",
          anchor: "xref-Ownable-renounceOwnership--"
        },
        {
          text: "transferOwnership(newOwner)",
          anchor: "xref-Ownable-transferOwnership-address-"
        },
        {
          text: "_transferOwnership(newOwner)",
          anchor: "xref-Ownable-_transferOwnership-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
    {
      category: "BaseState",
      lines: [
        {
          text: "nftPrice()",
          anchor: "xref-BaseState-nftPrice-uint256"
        },
        {
          text: "initialized()",
          anchor: "xref-BaseState-initialized-bool"
        },
        {
          text: "nftAddress()",
          anchor: "xref-BaseState-nftAddress-address"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Events"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "Initialized(owner, nft)",
          anchor: "xref-NativeNftSale-Initialized-address-address-"
        },
        {
          text: "UpdatePrice(oldPrice, newPrice)",
          anchor: "xref-NativeNftSale-UpdatePrice-uint256-uint256-"
        },
        {
          text: "BuyNFT(tokenId, PRICE, receiver, buyer)",
          anchor: "xref-NativeNftSale-BuyNFT-uint256-uint256-address-address-"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "OwnershipTransferred(previousOwner, newOwner)",
          anchor: "xref-Ownable-OwnershipTransferred-address-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
      ]
    },
    {
      category: "BaseState",
      lines: [
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="initialize"
    params="(address owner, address _nft, uint256 _price)"
    visibility="public"
    anchor="xref-NativeNftSale-initialize-address-address-uint256-"
>
    Initializes the contract with the requested price `_price` in native tokens for specified NFT `_nft`,
transferring ownership to the specified `owner`.
Callable only once.
Emits the `Initialized` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="buyNft"
    params="(address receiverAddress, string initialData) → uint256"
    visibility="public"
    anchor="xref-NativeNftSale-buyNft-address-string-"
>
    Purchases NFT for address `receiverAddress`, paying required price in native token.
This function calls the `mint` function on the `AnnotatedMintNft` contract, passing provided `initialData`.
Emits the `BuyNFT` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="updatePrice"
    params="(uint256 _nftPrice)"
    visibility="external"
    anchor="xref-NativeNftSale-updatePrice-uint256-"
>
    Changes the sale price to `_nftPrice`.
Callable only by the contract owner.
Emits the `UpdatePrice` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="withdraw"
    params="(address payable _account)"
    visibility="external"
    anchor="xref-NativeNftSale-withdraw-address-payable-"
>
    Withdraws the contract balance to `_account`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="upgradeContract"
    params="(address _newContract)"
    visibility="external"
    anchor="xref-NativeNftSale-upgradeContract-address-"
>
    Upgrades the contract implementation to `_newContract`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="receive"
    params="()"
    visibility="external"
    anchor="xref-NativeNftSale-receive--"
>
    Function allowing the contract to receive native tokens.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="Initialized"
    params="(address indexed owner, address indexed nft)"
    visibility="event"
    anchor="xref-NativeNftSale-Initialized-address-address-"
>
    Emitted when the contract is initialized.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="UpdatePrice"
    params="(uint256 indexed oldPrice, uint256 indexed newPrice)"
    visibility="event"
    anchor="xref-NativeNftSale-UpdatePrice-uint256-uint256-"
>
    Emitted when the NFT price is updated from `oldPrice` to `newPrice`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="BuyNFT"
    params="(uint256 indexed tokenId, uint256 indexed PRICE, address indexed receiver, address buyer)"
    visibility="event"
    anchor="xref-NativeNftSale-BuyNFT-uint256-uint256-address-address-"
>
    Emitted when an NFT of `tokenId` is minted to `receiver` by `buyer` paying `PRICE` in native tokens.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/GenericPayment.sol" anchor="GenericPayment">
    ### GenericPayment
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/GenericPayment.sol";
```

Facilitates accepting payment that accepts extra data to know what the payment was for inside a Paima dApp.

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "initialize(owner)",
          anchor: "xref-GenericPayment-initialize-address-"
        },
        {
          text: "pay(message)",
          anchor: "xref-GenericPayment-pay-string-"
        },
        {
          text: "withdraw(_account)",
          anchor: "xref-GenericPayment-withdraw-address-payable-"
        },
        {
          text: "upgradeContract(_newContract)",
          anchor: "xref-GenericPayment-upgradeContract-address-"
        },
        {
          text: "initialized()",
          anchor: "xref-GenericPayment-initialized-bool"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "owner()",
          anchor: "xref-Ownable-owner--"
        },
        {
          text: "_checkOwner()",
          anchor: "xref-Ownable-_checkOwner--"
        },
        {
          text: "renounceOwnership()",
          anchor: "xref-Ownable-renounceOwnership--"
        },
        {
          text: "transferOwnership(newOwner)",
          anchor: "xref-Ownable-transferOwnership-address-"
        },
        {
          text: "_transferOwnership(newOwner)",
          anchor: "xref-Ownable-_transferOwnership-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Events"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "Initialized(owner)",
          anchor: "xref-GenericPayment-Initialized-address-"
        },
        {
          text: "Pay(amount, payer, message)",
          anchor: "xref-GenericPayment-Pay-uint256-address-string-"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "OwnershipTransferred(previousOwner, newOwner)",
          anchor: "xref-Ownable-OwnershipTransferred-address-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="initialize"
    params="(address owner)"
    visibility="public"
    anchor="xref-GenericPayment-initialize-address-"
>
    Initializes the contracts, transferring ownership to the specified `owner`.
Callable only once.
Emits the `Initialized` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="pay"
    params="(string message)"
    visibility="external"
    anchor="xref-GenericPayment-pay-string-"
>
    Transfers native tokens to the contract, providing `message`.
Emits the `Pay` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="withdraw"
    params="(address payable _account)"
    visibility="external"
    anchor="xref-GenericPayment-withdraw-address-payable-"
>
    Withdraws the contract balance to `_account`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="upgradeContract"
    params="(address _newContract)"
    visibility="external"
    anchor="xref-GenericPayment-upgradeContract-address-"
>
    Upgrades the contract implementation to `_newContract`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="initialized"
    params="() → bool"
    visibility="public"
    anchor="xref-GenericPayment-initialized-bool"
>
    True if contract has been initialized via the `initialize` function.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="Initialized"
    params="(address indexed owner)"
    visibility="event"
    anchor="xref-GenericPayment-Initialized-address-"
>
    Emitted when the contract is initialized.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="Pay"
    params="(uint256 amount, address payer, string message)"
    visibility="event"
    anchor="xref-GenericPayment-Pay-uint256-address-string-"
>
    Emitted when payment of `amount` if made by `payer` with `message`.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/Erc20NftSale.sol" anchor="Erc20NftSale">
    ### Erc20NftSale
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/Erc20NftSale.sol";
```

Facilitates selling NFTs for specific ERC20s that accepts extra data when buying for any initialization data needed in a Paima dApp.

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "initialize(currencies, owner, _nft, _price)",
          anchor: "xref-Erc20NftSale-initialize-contract-ERC20---address-address-uint256-"
        },
        {
          text: "buyWithToken(_tokenAddress, receiverAddress, initialData)",
          anchor: "xref-Erc20NftSale-buyWithToken-contract-ERC20-address-string-"
        },
        {
          text: "removeWhitelistedToken(_token)",
          anchor: "xref-Erc20NftSale-removeWhitelistedToken-contract-ERC20-"
        },
        {
          text: "whitelistTokens(_tokens)",
          anchor: "xref-Erc20NftSale-whitelistTokens-contract-ERC20---"
        },
        {
          text: "updatePrice(_nftPrice)",
          anchor: "xref-Erc20NftSale-updatePrice-uint256-"
        },
        {
          text: "withdraw(_account)",
          anchor: "xref-Erc20NftSale-withdraw-address-"
        },
        {
          text: "upgradeContract(_newContract)",
          anchor: "xref-Erc20NftSale-upgradeContract-address-"
        },
        {
          text: "tokenIsWhitelisted(_token)",
          anchor: "xref-Erc20NftSale-tokenIsWhitelisted-contract-ERC20-"
        },
        {
          text: "getDepositedCurrencies()",
          anchor: "xref-Erc20NftSale-getDepositedCurrencies--"
        },
        {
          text: "getSupportedCurrencies()",
          anchor: "xref-Erc20NftSale-getSupportedCurrencies--"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "owner()",
          anchor: "xref-Ownable-owner--"
        },
        {
          text: "_checkOwner()",
          anchor: "xref-Ownable-_checkOwner--"
        },
        {
          text: "renounceOwnership()",
          anchor: "xref-Ownable-renounceOwnership--"
        },
        {
          text: "transferOwnership(newOwner)",
          anchor: "xref-Ownable-transferOwnership-address-"
        },
        {
          text: "_transferOwnership(newOwner)",
          anchor: "xref-Ownable-_transferOwnership-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
    {
      category: "State",
      lines: [
        {
          text: "nftPrice()",
          anchor: "xref-State-nftPrice-uint256"
        },
        {
          text: "initialized()",
          anchor: "xref-State-initialized-bool"
        },
        {
          text: "nftAddress()",
          anchor: "xref-State-nftAddress-address"
        },
        {
          text: "depositedCurrencies()",
          anchor: "xref-State-depositedCurrencies-contract-ERC20--"
        },
        {
          text: "depositedCurrenciesMap()",
          anchor: "xref-State-depositedCurrenciesMap-mapping-contract-ERC20----bool-"
        },
        {
          text: "supportedCurrencies()",
          anchor: "xref-State-supportedCurrencies-contract-ERC20--"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityOutlineBlock
  type="Events"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "Initialized(currencies, owner, nft)",
          anchor: "xref-Erc20NftSale-Initialized-contract-ERC20---address-address-"
        },
        {
          text: "UpdatePrice(oldPrice, newPrice)",
          anchor: "xref-Erc20NftSale-UpdatePrice-uint256-uint256-"
        },
        {
          text: "RemoveWhitelistedToken(token)",
          anchor: "xref-Erc20NftSale-RemoveWhitelistedToken-address-"
        },
        {
          text: "WhitelistTokens(token)",
          anchor: "xref-Erc20NftSale-WhitelistTokens-address---"
        },
        {
          text: "BuyWithToken(tokenId, PRICE, receiver, buyer)",
          anchor: "xref-Erc20NftSale-BuyWithToken-uint256-uint256-address-address-"
        },
      ]
    },
    {
      category: "Ownable",
      lines: [
        {
          text: "OwnershipTransferred(previousOwner, newOwner)",
          anchor: "xref-Ownable-OwnershipTransferred-address-address-"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
      ]
    },
    {
      category: "State",
      lines: [
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="initialize"
    params="(contract ERC20[] currencies, address owner, address _nft, uint256 _price)"
    visibility="public"
    anchor="xref-Erc20NftSale-initialize-contract-ERC20---address-address-uint256-"
>
    Initializes the contract with the requested price `_price` in tokens of `currencies` for specified NFT `_nft`,
transferring ownership to the specified `owner`.
Callable only once.
Emits the `Initialized` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="buyWithToken"
    params="(contract ERC20 _tokenAddress, address receiverAddress, string initialData) → uint256"
    visibility="public"
    anchor="xref-Erc20NftSale-buyWithToken-contract-ERC20-address-string-"
>
    Purchases NFT for address `receiverAddress`, paying required price in token of `_tokenAddress`,
if it is one of the `supportedCurrencies`.
This function calls the `mint` function on the `AnnotatedMintNft` contract, passing provided `initialData`.
Emits the `BuyWithToken` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="removeWhitelistedToken"
    params="(contract ERC20 _token)"
    visibility="external"
    anchor="xref-Erc20NftSale-removeWhitelistedToken-contract-ERC20-"
>
    Removes `_token` from the list of `supportedCurrencies`.
Callable only by the contract owner.
Emits the `RemoveWhitelistedToken` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="whitelistTokens"
    params="(contract ERC20[] _tokens)"
    visibility="external"
    anchor="xref-Erc20NftSale-whitelistTokens-contract-ERC20---"
>
    Sets `_tokens` array as the `supportedCurrencies` array.
Callable only by the contract owner.
Emits the `WhitelistTokens` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="updatePrice"
    params="(uint256 _nftPrice)"
    visibility="external"
    anchor="xref-Erc20NftSale-updatePrice-uint256-"
>
    Changes the sale price to `_nftPrice`.
Callable only by the contract owner.
Emits the `UpdatePrice` event.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="withdraw"
    params="(address _account)"
    visibility="external"
    anchor="xref-Erc20NftSale-withdraw-address-"
>
    Withdraws the contract balance of `depositedCurrencies` to `_account`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="upgradeContract"
    params="(address _newContract)"
    visibility="external"
    anchor="xref-Erc20NftSale-upgradeContract-address-"
>
    Upgrades the contract implementation to `_newContract`.
Callable only by the contract owner.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="tokenIsWhitelisted"
    params="(contract ERC20 _token) → bool"
    visibility="public"
    anchor="xref-Erc20NftSale-tokenIsWhitelisted-contract-ERC20-"
>
    Returns true if `_token` is part of the `supportedCurrencies`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="getDepositedCurrencies"
    params="() → contract ERC20[]"
    visibility="public"
    anchor="xref-Erc20NftSale-getDepositedCurrencies--"
>
    Returns the token addresses that have been used as a payment in the NFT purchases.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="getSupportedCurrencies"
    params="() → contract ERC20[]"
    visibility="public"
    anchor="xref-Erc20NftSale-getSupportedCurrencies--"
>
    Returns an array of token addresses that are accepted as payment in the NFT purchase.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="Initialized"
    params="(contract ERC20[] indexed currencies, address indexed owner, address indexed nft)"
    visibility="event"
    anchor="xref-Erc20NftSale-Initialized-contract-ERC20---address-address-"
>
    Emitted when the contract is initialized.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="UpdatePrice"
    params="(uint256 indexed oldPrice, uint256 indexed newPrice)"
    visibility="event"
    anchor="xref-Erc20NftSale-UpdatePrice-uint256-uint256-"
>
    Emitted when the NFT price is updated from `oldPrice` to `newPrice`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="RemoveWhitelistedToken"
    params="(address indexed token)"
    visibility="event"
    anchor="xref-Erc20NftSale-RemoveWhitelistedToken-address-"
>
    Emitted when the `token` is removed from the list of `supportedCurrencies`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="WhitelistTokens"
    params="(address[] indexed token)"
    visibility="event"
    anchor="xref-Erc20NftSale-WhitelistTokens-address---"
>
    Emitted when the `token` array is set as the `supportedCurrencies`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="BuyWithToken"
    params="(uint256 indexed tokenId, uint256 indexed PRICE, address indexed receiver, address buyer)"
    visibility="event"
    anchor="xref-Erc20NftSale-BuyWithToken-uint256-uint256-address-address-"
>
    Emitted when an NFT of `tokenId` is minted to `receiver` by `buyer` paying `PRICE` in tokens of `supportedCurrencies`.
</SolidityDetailBlock>

## Utilities

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/BaseState.sol" anchor="BaseState">
    ### BaseState
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/BaseState.sol";
```

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "nftPrice()",
          anchor: "xref-BaseState-nftPrice-uint256"
        },
        {
          text: "initialized()",
          anchor: "xref-BaseState-initialized-bool"
        },
        {
          text: "nftAddress()",
          anchor: "xref-BaseState-nftAddress-address"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="nftPrice"
    params="() → uint256"
    visibility="public"
    anchor="xref-BaseState-nftPrice-uint256"
>
    Required payment for the NFT in sale.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="initialized"
    params="() → bool"
    visibility="public"
    anchor="xref-BaseState-initialized-bool"
>
    True if contract has been initialized via `initialize` function.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="nftAddress"
    params="() → address"
    visibility="public"
    anchor="xref-BaseState-nftAddress-address"
>
    Address of the NFT for sale.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/State.sol" anchor="State">
    ### State
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/State.sol";
```

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "nftPrice()",
          anchor: "xref-State-nftPrice-uint256"
        },
        {
          text: "initialized()",
          anchor: "xref-State-initialized-bool"
        },
        {
          text: "nftAddress()",
          anchor: "xref-State-nftAddress-address"
        },
        {
          text: "depositedCurrencies()",
          anchor: "xref-State-depositedCurrencies-contract-ERC20--"
        },
        {
          text: "depositedCurrenciesMap()",
          anchor: "xref-State-depositedCurrenciesMap-mapping-contract-ERC20----bool-"
        },
        {
          text: "supportedCurrencies()",
          anchor: "xref-State-supportedCurrencies-contract-ERC20--"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="nftPrice"
    params="() → uint256"
    visibility="public"
    anchor="xref-State-nftPrice-uint256"
>
    Required payment for the NFT in sale.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="initialized"
    params="() → bool"
    visibility="public"
    anchor="xref-State-initialized-bool"
>
    True if contract has been initialized via `initialize` function.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="nftAddress"
    params="() → address"
    visibility="public"
    anchor="xref-State-nftAddress-address"
>
    Address of the NFT for sale.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="depositedCurrencies"
    params="() → contract ERC20[]"
    visibility="public"
    anchor="xref-State-depositedCurrencies-contract-ERC20--"
>
    Array of addresses of tokens that have been deposited to the contract via NFT sales.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="depositedCurrenciesMap"
    params="() → mapping(contract ERC20 &#x3D;&gt; bool)"
    visibility="public"
    anchor="xref-State-depositedCurrenciesMap-mapping-contract-ERC20----bool-"
>
    Mapping that returns true for address of token that has been deposited to the contract via NFT sale.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="supportedCurrencies"
    params="() → contract ERC20[]"
    visibility="public"
    anchor="xref-State-supportedCurrencies-contract-ERC20--"
>
    Array of addresses of tokens that are accepted as payment for the NFT sale.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/ERC1967.sol" anchor="ERC1967">
    ### ERC1967
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/ERC1967.sol";
```

ERC1967 contract providing randomized implementation storage slot
Made as a small subset of https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/ERC1967/ERC1967Upgrade.sol

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="_assertCorrectImplementationSlot"
    params="()"
    visibility="internal"
    anchor="xref-ERC1967-_assertCorrectImplementationSlot--"
>
    Assert that value of `_IMPLEMENTATION_SLOT` matches expected value
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_getImplementation"
    params="() → address"
    visibility="internal"
    anchor="xref-ERC1967-_getImplementation--"
>
    Returns the current implementation address.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_setImplementation"
    params="(address newImplementation)"
    visibility="internal"
    anchor="xref-ERC1967-_setImplementation-address-"
>
    Stores a new address in the EIP1967 implementation slot.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/Proxy/NativeNftSaleProxy.sol" anchor="NativeNftSaleProxy">
    ### NativeNftSaleProxy
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/Proxy/NativeNftSaleProxy.sol";
```

Proxy contract mostly based on https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/Proxy.sol

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "constructor(implementation, owner, nftAddress, nftPrice)",
          anchor: "xref-NativeNftSaleProxy-constructor-address-address-address-uint256-"
        },
        {
          text: "_delegate(target)",
          anchor: "xref-NativeNftSaleProxy-_delegate-address-"
        },
        {
          text: "_fallback()",
          anchor: "xref-NativeNftSaleProxy-_fallback--"
        },
        {
          text: "fallback()",
          anchor: "xref-NativeNftSaleProxy-fallback--"
        },
        {
          text: "receive()",
          anchor: "xref-NativeNftSaleProxy-receive--"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="constructor"
    params="(address implementation, address owner, address nftAddress, uint256 nftPrice)"
    visibility="public"
    anchor="xref-NativeNftSaleProxy-constructor-address-address-address-uint256-"
>
    Sets `implementation` address and calls the `NativeNftSale.initialize` function with the parameters
`owner`, `nftAddress`, `nftPrice`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_delegate"
    params="(address target)"
    visibility="internal"
    anchor="xref-NativeNftSaleProxy-_delegate-address-"
>
    Delegates the current call to `implementation`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_fallback"
    params="()"
    visibility="internal"
    anchor="xref-NativeNftSaleProxy-_fallback--"
>
    Delegates the current call to the address returned by `_implementation()`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="fallback"
    params="()"
    visibility="external"
    anchor="xref-NativeNftSaleProxy-fallback--"
>
    Fallback function that delegates calls to the address returned by `_implementation()`.
Will run if no other function in the contract matches the call data.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="receive"
    params="()"
    visibility="external"
    anchor="xref-NativeNftSaleProxy-receive--"
>
    Called if this contract is receiving native tokens and `msg.data` is empty
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/Proxy/GenericPaymentProxy.sol" anchor="GenericPaymentProxy">
    ### GenericPaymentProxy
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/Proxy/GenericPaymentProxy.sol";
```

Proxy contract mostly based on https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/Proxy.sol

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "constructor(implementation, owner)",
          anchor: "xref-GenericPaymentProxy-constructor-address-address-"
        },
        {
          text: "_delegate(target)",
          anchor: "xref-GenericPaymentProxy-_delegate-address-"
        },
        {
          text: "_fallback()",
          anchor: "xref-GenericPaymentProxy-_fallback--"
        },
        {
          text: "fallback()",
          anchor: "xref-GenericPaymentProxy-fallback--"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="constructor"
    params="(address implementation, address owner)"
    visibility="public"
    anchor="xref-GenericPaymentProxy-constructor-address-address-"
>
    Sets `implementation` address and calls the `GenericPayment.initialize` function with the parameter
`owner`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_delegate"
    params="(address target)"
    visibility="internal"
    anchor="xref-GenericPaymentProxy-_delegate-address-"
>
    Delegates the current call to `implementation`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_fallback"
    params="()"
    visibility="internal"
    anchor="xref-GenericPaymentProxy-_fallback--"
>
    Delegates the current call to the address returned by `_implementation()`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="fallback"
    params="()"
    visibility="external"
    anchor="xref-GenericPaymentProxy-fallback--"
>
    Fallback function that delegates calls to the address returned by `_implementation()`.
Will run if no other function in the contract matches the call data.
</SolidityDetailBlock>

<ContractHeader githubLink="https://github.com/PaimaStudios/paima-engine/tree/master/packages/evm-contracts/contracts/Proxy/Erc20NftSaleProxy.sol" anchor="Erc20NftSaleProxy">
    ### Erc20NftSaleProxy
</ContractHeader>

```solidity
import "@paima/evm-contracts/contracts/Proxy/Erc20NftSaleProxy.sol";
```

Proxy contract mostly based on https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/proxy/Proxy.sol

<SolidityOutlineBlock
  type="Functions"
  lists={[
    {
      category: "",
      lines: [
        {
          text: "constructor(implementation, currencies, owner, nftAddress, nftPrice)",
          anchor: "xref-Erc20NftSaleProxy-constructor-address-contract-ERC20---address-address-uint256-"
        },
        {
          text: "_delegate(target)",
          anchor: "xref-Erc20NftSaleProxy-_delegate-address-"
        },
        {
          text: "_fallback()",
          anchor: "xref-Erc20NftSaleProxy-_fallback--"
        },
        {
          text: "fallback()",
          anchor: "xref-Erc20NftSaleProxy-fallback--"
        },
        {
          text: "receive()",
          anchor: "xref-Erc20NftSaleProxy-receive--"
        },
      ]
    },
    {
      category: "ERC1967",
      lines: [
        {
          text: "_assertCorrectImplementationSlot()",
          anchor: "xref-ERC1967-_assertCorrectImplementationSlot--"
        },
        {
          text: "_getImplementation()",
          anchor: "xref-ERC1967-_getImplementation--"
        },
        {
          text: "_setImplementation(newImplementation)",
          anchor: "xref-ERC1967-_setImplementation-address-"
        },
      ]
    },
  ]}
>
</SolidityOutlineBlock>

<SolidityDetailBlock
    title="constructor"
    params="(address implementation, contract ERC20[] currencies, address owner, address nftAddress, uint256 nftPrice)"
    visibility="public"
    anchor="xref-Erc20NftSaleProxy-constructor-address-contract-ERC20---address-address-uint256-"
>
    Sets `implementation` address and calls the `Erc20NftSale.initialize` function with the parameters
`currencies`, `owner`, `nftAddress`, `nftPrice`.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_delegate"
    params="(address target)"
    visibility="internal"
    anchor="xref-Erc20NftSaleProxy-_delegate-address-"
>
    Delegates the current call to `implementation`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="_fallback"
    params="()"
    visibility="internal"
    anchor="xref-Erc20NftSaleProxy-_fallback--"
>
    Delegates the current call to the address returned by `_implementation()`.
This function does not return to its internal call site, it will return
directly to the external caller.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="fallback"
    params="()"
    visibility="external"
    anchor="xref-Erc20NftSaleProxy-fallback--"
>
    Fallback function that delegates calls to the address returned by `_implementation()`.
Will run if no other function in the contract matches the call data.
</SolidityDetailBlock>

<SolidityDetailBlock
    title="receive"
    params="()"
    visibility="external"
    anchor="xref-Erc20NftSaleProxy-receive--"
>
    Called if this contract is receiving native tokens and `msg.data` is empty
</SolidityDetailBlock>

